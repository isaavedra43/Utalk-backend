# =============================================================================
# UTalk Backend Environment Variables - VERSI√ìN DEFINITIVA
# =============================================================================
# 
# Este archivo contiene TODAS las variables de entorno utilizadas por el backend.
# Las variables est√°n organizadas por categor√≠as para facilitar la configuraci√≥n.
#
# IMPORTANTE: 
# - Variables marcadas con # REVISAR requieren verificaci√≥n del equipo DevOps
# - Variables marcadas con # NUEVA no estaban en el env.example original
# - Variables marcadas con # POSIBLEMENTE OBSOLETA pueden no estar en uso
# =============================================================================

# =============================================================================
# üîß CONFIGURACI√ìN DEL SERVIDOR
# =============================================================================

# Puerto del servidor (por defecto: 3001)
PORT=3001

# Entorno de ejecuci√≥n (development, production, test)
NODE_ENV=production

# Opciones de Node.js para optimizaci√≥n de memoria
NODE_OPTIONS=--max-old-space-size=2048

# =============================================================================
# üîí AUTENTICACI√ìN Y SEGURIDAD
# =============================================================================

# Secreto para JWT (REQUERIDO)
JWT_SECRET=your-super-secret-jwt-key-here

# Secreto para refresh tokens (si no se especifica, usa JWT_SECRET)
JWT_REFRESH_SECRET=your-refresh-token-secret-here

# Tiempo de expiraci√≥n del access token (por defecto: 15m)
JWT_EXPIRES_IN=15m

# Tiempo de expiraci√≥n del refresh token (por defecto: 7d)
JWT_REFRESH_EXPIRES_IN=7d

# Emisor del JWT (opcional)
JWT_ISSUER=utalk-backend

# Clave de override para administradores (para bypass de seguridad en desarrollo)
ADMIN_OVERRIDE_KEY=admin-override-key-here

# =============================================================================
# üîó WEBHOOKS Y APIs EXTERNAS
# =============================================================================

# Secreto para validar webhooks de Twilio
WEBHOOK_SECRET=your-webhook-secret-here

# URL de documentaci√≥n de la API
API_DOCS_URL=https://api.utalk.com/docs

# =============================================================================
# üîë APIs EXTERNAS
# =============================================================================

# Clave de API de OpenAI para procesamiento de audio
OPENAI_API_KEY=sk-your-openai-api-key-here

# =============================================================================
# üì¶ PROCESAMIENTO EN LOTE (BATCH)
# =============================================================================

# Tama√±o del lote para operaciones de Firestore (por defecto: 500)
BATCH_SIZE=500

# M√°ximo n√∫mero de lotes concurrentes (por defecto: 10)
MAX_CONCURRENT_BATCHES=10

# N√∫mero de intentos de reintento para lotes fallidos (por defecto: 3)
BATCH_RETRY_ATTEMPTS=3

# Delay entre reintentos en milisegundos (por defecto: 1000)
BATCH_RETRY_DELAY=1000

# =============================================================================
# üóÑÔ∏è REDIS Y CACH√â
# =============================================================================

# URL de Redis (puede ser REDIS_URL o REDISCLOUD_URL)
REDIS_URL=redis://localhost:6379

# URL alternativa de Redis (para compatibilidad con RedisCloud)
REDISCLOUD_URL=redis://your-rediscloud-url

# Configuraci√≥n de sentinel para Redis (JSON array)
REDIS_SENTINELS=["redis://sentinel1:26379", "redis://sentinel2:26379"]

# Nombre del master en configuraci√≥n de sentinel (por defecto: mymaster)
REDIS_MASTER_NAME=mymaster

# Habilitar modo cluster de Redis (true/false)
REDIS_CLUSTER=false

# Habilitar compresi√≥n de cach√© (true/false)
CACHE_COMPRESSION=true

# =============================================================================
# üìù LOGGING Y MONITOREO
# =============================================================================

# Nivel de logging (debug, info, warn, error)
LOG_LEVEL=info

# Habilitar logging a archivo (true/false)
ENABLE_FILE_LOGGING=true

# Directorio para archivos de log (por defecto: ./logs)
LOG_DIR=./logs

# Habilitar archivo de alertas cr√≠ticas (true/false)
ENABLE_ALERT_FILE=true

# =============================================================================
# üö´ SEGURIDAD AVANZADA
# =============================================================================

# M√°ximo n√∫mero de intentos fallidos antes de bloquear (por defecto: 5)
MAX_FAILED_ATTEMPTS=5

# Duraci√≥n del bloqueo en minutos (por defecto: 30)
BLOCK_DURATION_MINUTES=30

# Umbral de actividad sospechosa (por defecto: 10)
SUSPICIOUS_THRESHOLD=10

# Intervalo de limpieza en minutos (por defecto: 60)
CLEANUP_INTERVAL_MINUTES=60

# =============================================================================
# üîó FRONTEND Y CORS
# =============================================================================

# URL del frontend (puede ser m√∫ltiple separada por comas)
FRONTEND_URL=https://yourdomain.com,https://www.yourdomain.com

# =============================================================================
# üóÑÔ∏è FIREBASE CONFIGURACI√ìN
# =============================================================================

# ID del proyecto de Firebase
FIREBASE_PROJECT_ID=your-firebase-project-id

# Clave de servicio de Firebase (JSON completo como string)
FIREBASE_SERVICE_ACCOUNT_KEY={"type":"service_account","project_id":"your-project","private_key_id":"...","private_key":"-----BEGIN PRIVATE KEY-----\n...\n-----END PRIVATE KEY-----\n","client_email":"firebase-adminsdk-xxx@your-project.iam.gserviceaccount.com","client_id":"...","auth_uri":"https://accounts.google.com/o/oauth2/auth","token_uri":"https://oauth2.googleapis.com/token","auth_provider_x509_cert_url":"https://www.googleapis.com/oauth2/v1/certs","client_x509_cert_url":"https://www.googleapis.com/robot/v1/metadata/x509/firebase-adminsdk-xxx%40your-project.iam.gserviceaccount.com"}

# =============================================================================
# üì± TWILIO CONFIGURACI√ìN
# =============================================================================

# Account SID de Twilio (debe empezar con 'AC')
TWILIO_ACCOUNT_SID=ACxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx

# Auth Token de Twilio
TWILIO_AUTH_TOKEN=your-twilio-auth-token-here

# N√∫mero de WhatsApp de Twilio (debe empezar con 'whatsapp:')
TWILIO_WHATSAPP_NUMBER=whatsapp:+1234567890

# =============================================================================
# üõ†Ô∏è CONFIGURACI√ìN ADICIONAL
# =============================================================================

# ID del agente por defecto (por defecto: system)
DEFAULT_AGENT_ID=system

# =============================================================================
# ‚ö†Ô∏è VARIABLES QUE REQUIEREN REVISI√ìN
# =============================================================================

# REVISAR: Variable npm_package_version - ¬øSe usa realmente?
# npm_package_version=1.0.0

# =============================================================================
# üìã RESUMEN DE VARIABLES
# =============================================================================
#
# VARIABLES CR√çTICAS (REQUERIDAS):
# - JWT_SECRET
# - TWILIO_ACCOUNT_SID
# - TWILIO_AUTH_TOKEN
# - TWILIO_WHATSAPP_NUMBER
# - FIREBASE_PROJECT_ID
# - FIREBASE_SERVICE_ACCOUNT_KEY
#
# VARIABLES NUEVAS (no estaban en env.example original):
# - JWT_REFRESH_SECRET
# - JWT_REFRESH_EXPIRES_IN
# - JWT_EXPIRES_IN
# - JWT_ISSUER
# - ADMIN_OVERRIDE_KEY
# - WEBHOOK_SECRET
# - API_DOCS_URL
# - OPENAI_API_KEY
# - BATCH_SIZE
# - MAX_CONCURRENT_BATCHES
# - BATCH_RETRY_ATTEMPTS
# - BATCH_RETRY_DELAY
# - REDISCLOUD_URL
# - REDIS_SENTINELS
# - REDIS_MASTER_NAME
# - REDIS_CLUSTER
# - CACHE_COMPRESSION
# - LOG_LEVEL
# - ENABLE_FILE_LOGGING
# - LOG_DIR
# - ENABLE_ALERT_FILE
# - MAX_FAILED_ATTEMPTS
# - BLOCK_DURATION_MINUTES
# - SUSPICIOUS_THRESHOLD
# - CLEANUP_INTERVAL_MINUTES
# - NODE_OPTIONS
# - FIREBASE_PROJECT_ID
#
# VARIABLES POSIBLEMENTE OBSOLETAS (del env.example original):
# - FIREBASE_TYPE
# - FIREBASE_PRIVATE_KEY_ID
# - FIREBASE_PRIVATE_KEY
# - FIREBASE_CLIENT_EMAIL
# - FIREBASE_CLIENT_ID
# - FIREBASE_AUTH_URI
# - FIREBASE_TOKEN_URI
# - FIREBASE_AUTH_PROVIDER_X509_CERT_URL
# - FIREBASE_CLIENT_X509_CERT_URL
# - FIREBASE_STORAGE_BUCKET
#
# ============================================================================= 