{
  "exportDate": "2025-08-16T21:22:40.011Z",
  "totalLogs": 51,
  "logs": [
    {
      "timestamp": "2025-08-16T21:21:11.948Z",
      "level": "log",
      "message": "🔌 WebSocketContext - Estado actualizado en DOM:",
      "data": [
        [
          "disconnected"
        ]
      ]
    },
    {
      "timestamp": "2025-08-16T21:21:11.948Z",
      "level": "log",
      "message": "🔐 AuthProvider - Estado actual:",
      "data": [
        [
          {
            "isAuthenticated": false,
            "loading": true,
            "isAuthenticating": false,
            "hasUser": false,
            "hasBackendUser": false,
            "error": null
          }
        ]
      ]
    },
    {
      "timestamp": "2025-08-16T21:21:11.948Z",
      "level": "log",
      "message": "🔐 AuthContext - Estado que se pasa al contexto:",
      "data": [
        [
          {
            "isAuthenticated": false,
            "loading": true,
            "isAuthenticating": false,
            "hasUser": false,
            "hasBackendUser": false,
            "error": null
          }
        ]
      ]
    },
    {
      "timestamp": "2025-08-16T21:21:11.949Z",
      "level": "log",
      "message": "🔌 WebSocketContext - Estado actualizado en DOM:",
      "data": [
        [
          "disconnected"
        ]
      ]
    },
    {
      "timestamp": "2025-08-16T21:21:11.949Z",
      "level": "log",
      "message": "🔐 AuthProvider - Estado actual:",
      "data": [
        [
          {
            "isAuthenticated": false,
            "loading": true,
            "isAuthenticating": false,
            "hasUser": false,
            "hasBackendUser": false,
            "error": null
          }
        ]
      ]
    },
    {
      "timestamp": "2025-08-16T21:21:11.949Z",
      "level": "log",
      "message": "🔐 AuthContext - Estado que se pasa al contexto:",
      "data": [
        [
          {
            "isAuthenticated": false,
            "loading": true,
            "isAuthenticating": false,
            "hasUser": false,
            "hasBackendUser": false,
            "error": null
          }
        ]
      ]
    },
    {
      "timestamp": "2025-08-16T21:21:14.847Z",
      "level": "info",
      "message": "[2025-08-16T21:21:14.847Z] [INFO] [AUTH] Iniciando login con backend | Data: {\n  \"email\": \"admin@company.com\"\n}"
    },
    {
      "timestamp": "2025-08-16T21:21:14.854Z",
      "level": "log",
      "message": "🔐 AuthProvider - Estado actual:",
      "data": [
        [
          {
            "isAuthenticated": false,
            "loading": true,
            "isAuthenticating": true,
            "hasUser": false,
            "hasBackendUser": false,
            "error": null
          }
        ]
      ]
    },
    {
      "timestamp": "2025-08-16T21:21:14.854Z",
      "level": "log",
      "message": "🔐 AuthContext - Estado que se pasa al contexto:",
      "data": [
        [
          {
            "isAuthenticated": false,
            "loading": true,
            "isAuthenticating": true,
            "hasUser": false,
            "hasBackendUser": false,
            "error": null
          }
        ]
      ]
    },
    {
      "timestamp": "2025-08-16T21:21:14.855Z",
      "level": "info",
      "message": "[2025-08-16T21:21:14.855Z] [INFO] [API] Request sin token | Data: {\n  \"method\": \"POST\",\n  \"url\": \"/api/auth/login\",\n  \"isAuthEndpoint\": true\n}"
    },
    {
      "timestamp": "2025-08-16T21:21:15.923Z",
      "level": "info",
      "message": "[2025-08-16T21:21:15.923Z] [INFO] [API] Response exitosa | Data: {\n  \"method\": \"POST\",\n  \"url\": \"/api/auth/login\",\n  \"status\": 200,\n  \"statusText\": \"\"\n}"
    },
    {
      "timestamp": "2025-08-16T21:21:15.925Z",
      "level": "log",
      "message": "🔐 ProtectedRoute - Estado:",
      "data": [
        [
          {
            "isAuthenticated": true,
            "loading": false
          }
        ]
      ]
    },
    {
      "timestamp": "2025-08-16T21:21:15.925Z",
      "level": "log",
      "message": "🔐 ProtectedRoute - Estado:",
      "data": [
        [
          {
            "isAuthenticated": true,
            "loading": false
          }
        ]
      ]
    },
    {
      "timestamp": "2025-08-16T21:21:15.933Z",
      "level": "log",
      "message": "🔌 WebSocketContext - Ruta /chat: conectando WebSocket..."
    },
    {
      "timestamp": "2025-08-16T21:21:15.933Z",
      "level": "log",
      "message": "🔌 Iniciando conexión de socket..."
    },
    {
      "timestamp": "2025-08-16T21:21:15.933Z",
      "level": "log",
      "message": "🔌 Configurando socket con URL:",
      "data": [
        [
          "wss://utalk-backend-production.up.railway.app"
        ]
      ]
    },
    {
      "timestamp": "2025-08-16T21:21:15.933Z",
      "level": "log",
      "message": "🔌 Token disponible:",
      "data": [
        [
          "Sí"
        ]
      ]
    },
    {
      "timestamp": "2025-08-16T21:21:15.933Z",
      "level": "log",
      "message": "🔌 Configuración de entorno:",
      "data": [
        [
          {
            "WS_URL": "wss://utalk-backend-production.up.railway.app",
            "BACKEND_URL": "https://utalk-backend-production.up.railway.app",
            "DEV_MODE": true
          }
        ]
      ]
    },
    {
      "timestamp": "2025-08-16T21:21:15.933Z",
      "level": "log",
      "message": "🔐 JWT - Información extraída del token:",
      "data": [
        [
          {
            "workspaceId": "default_workspace",
            "tenantId": "default_tenant",
            "userId": "admin@company.com",
            "email": "admin@company.com",
            "role": "admin"
          }
        ]
      ]
    },
    {
      "timestamp": "2025-08-16T21:21:15.933Z",
      "level": "log",
      "message": "🔐 JWT - Payload completo del token:",
      "data": [
        [
          {
            "email": "admin@company.com",
            "role": "admin",
            "name": "Administrador del Sistema",
            "type": "access",
            "userId": "admin@company.com",
            "workspaceId": "default_workspace",
            "tenantId": "default_tenant",
            "iat": 1755379275,
            "exp": 1755380175,
            "aud": "utalk-api",
            "iss": "utalk-backend"
          }
        ]
      ]
    },
    {
      "timestamp": "2025-08-16T21:21:15.933Z",
      "level": "log",
      "message": "🔐 JWT - Información extraída del token:",
      "data": [
        [
          {
            "workspaceId": "default_workspace",
            "tenantId": "default_tenant",
            "userId": "admin@company.com"
          }
        ]
      ]
    },
    {
      "timestamp": "2025-08-16T21:21:15.933Z",
      "level": "log",
      "message": "🔌 Información del usuario para socket:",
      "data": [
        [
          {
            "workspaceId": "default_workspace",
            "tenantId": "default_tenant",
            "userId": "admin@company.com",
            "email": "admin@company.com"
          }
        ]
      ]
    },
    {
      "timestamp": "2025-08-16T21:21:15.934Z",
      "level": "log",
      "message": "🔌 Conectando socket con timeout de",
      "data": [
        [
          45000,
          "ms..."
        ]
      ]
    },
    {
      "timestamp": "2025-08-16T21:21:15.935Z",
      "level": "info",
      "message": "[2025-08-16T21:21:15.935Z] [INFO] [API] Token agregado a request | Data: {\n  \"method\": \"GET\",\n  \"url\": \"/api/conversations?page=1&limit=20&status=all\",\n  \"hasToken\": true,\n  \"tokenPreview\": \"eyJhbGciOiJIUzI1NiIs...\"\n}"
    },
    {
      "timestamp": "2025-08-16T21:21:16.025Z",
      "level": "log",
      "message": "🔌 WebSocketContext - Login exitoso, conectando WebSocket inmediatamente..."
    },
    {
      "timestamp": "2025-08-16T21:21:16.025Z",
      "level": "log",
      "message": "🔌 Ya hay una conexión en progreso, saltando..."
    },
    {
      "timestamp": "2025-08-16T21:21:16.259Z",
      "level": "info",
      "message": "[2025-08-16T21:21:16.259Z] [INFO] [API] Response exitosa | Data: {\n  \"method\": \"GET\",\n  \"url\": \"/api/conversations?page=1&limit=20&status=all\",\n  \"status\": 200,\n  \"statusText\": \"\"\n}"
    },
    {
      "timestamp": "2025-08-16T21:21:16.416Z",
      "level": "log",
      "message": "🔌 WebSocketContext - Estado actualizado en DOM:",
      "data": [
        [
          "connected"
        ]
      ]
    },
    {
      "timestamp": "2025-08-16T21:21:28.467Z",
      "level": "info",
      "message": "[2025-08-16T21:21:28.467Z] [INFO] [API] Token agregado a request | Data: {\n  \"method\": \"GET\",\n  \"url\": \"/api/conversations/conv_+5214773790184_+5214793176502\",\n  \"hasToken\": true,\n  \"tokenPreview\": \"eyJhbGciOiJIUzI1NiIs...\"\n}"
    },
    {
      "timestamp": "2025-08-16T21:21:28.986Z",
      "level": "info",
      "message": "[2025-08-16T21:21:28.986Z] [INFO] [API] Response exitosa | Data: {\n  \"method\": \"GET\",\n  \"url\": \"/api/conversations/conv_+5214773790184_+5214793176502\",\n  \"status\": 200,\n  \"statusText\": \"\"\n}"
    },
    {
      "timestamp": "2025-08-16T21:21:28.986Z",
      "level": "error",
      "message": "Error obteniendo perfil completo del cliente:",
      "data": [
        [
          {}
        ]
      ]
    },
    {
      "timestamp": "2025-08-16T21:21:28.993Z",
      "level": "info",
      "message": "[2025-08-16T21:21:28.993Z] [INFO] [API] Token agregado a request | Data: {\n  \"method\": \"GET\",\n  \"url\": \"/api/conversations/conv_+5214773790184_+5214793176502\",\n  \"hasToken\": true,\n  \"tokenPreview\": \"eyJhbGciOiJIUzI1NiIs...\"\n}"
    },
    {
      "timestamp": "2025-08-16T21:21:29.320Z",
      "level": "info",
      "message": "[2025-08-16T21:21:29.320Z] [INFO] [API] Response exitosa | Data: {\n  \"method\": \"GET\",\n  \"url\": \"/api/conversations/conv_+5214773790184_+5214793176502\",\n  \"status\": 200,\n  \"statusText\": \"\"\n}"
    },
    {
      "timestamp": "2025-08-16T21:21:29.321Z",
      "level": "error",
      "message": "Error obteniendo perfil completo del cliente:",
      "data": [
        [
          {}
        ]
      ]
    },
    {
      "timestamp": "2025-08-16T21:21:29.327Z",
      "level": "info",
      "message": "[2025-08-16T21:21:29.327Z] [INFO] [API] Token agregado a request | Data: {\n  \"method\": \"GET\",\n  \"url\": \"/api/conversations/conv_+5214773790184_+5214793176502\",\n  \"hasToken\": true,\n  \"tokenPreview\": \"eyJhbGciOiJIUzI1NiIs...\"\n}"
    },
    {
      "timestamp": "2025-08-16T21:21:29.511Z",
      "level": "log",
      "message": "🔐 JWT - Información extraída del token:",
      "data": [
        [
          {
            "workspaceId": "default_workspace",
            "tenantId": "default_tenant",
            "userId": "admin@company.com",
            "email": "admin@company.com",
            "role": "admin"
          }
        ]
      ]
    },
    {
      "timestamp": "2025-08-16T21:21:29.512Z",
      "level": "log",
      "message": "🔐 JWT - Payload completo del token:",
      "data": [
        [
          {
            "email": "admin@company.com",
            "role": "admin",
            "name": "Administrador del Sistema",
            "type": "access",
            "userId": "admin@company.com",
            "workspaceId": "default_workspace",
            "tenantId": "default_tenant",
            "iat": 1755379275,
            "exp": 1755380175,
            "aud": "utalk-api",
            "iss": "utalk-backend"
          }
        ]
      ]
    },
    {
      "timestamp": "2025-08-16T21:21:29.512Z",
      "level": "log",
      "message": "🔐 JWT - Información extraída del token:",
      "data": [
        [
          {
            "workspaceId": "default_workspace",
            "tenantId": "default_tenant",
            "userId": "admin@company.com"
          }
        ]
      ]
    },
    {
      "timestamp": "2025-08-16T21:21:29.512Z",
      "level": "info",
      "message": "[2025-08-16T21:21:29.512Z] [INFO] [API] Token agregado a request | Data: {\n  \"method\": \"GET\",\n  \"url\": \"/api/messages?conversationId=conv_%2B5214773790184_%2B5214793176502&limit=50\",\n  \"hasToken\": true,\n  \"tokenPreview\": \"eyJhbGciOiJIUzI1NiIs...\"\n}"
    },
    {
      "timestamp": "2025-08-16T21:21:29.642Z",
      "level": "info",
      "message": "[2025-08-16T21:21:29.642Z] [INFO] [API] Response exitosa | Data: {\n  \"method\": \"GET\",\n  \"url\": \"/api/conversations/conv_+5214773790184_+5214793176502\",\n  \"status\": 200,\n  \"statusText\": \"\"\n}"
    },
    {
      "timestamp": "2025-08-16T21:21:29.642Z",
      "level": "error",
      "message": "Error obteniendo perfil completo del cliente:",
      "data": [
        [
          {}
        ]
      ]
    },
    {
      "timestamp": "2025-08-16T21:21:29.649Z",
      "level": "warn",
      "message": "⚠️ Rate limit excedido para:",
      "data": [
        [
          "/api/conversations/conv_+5214773790184_+5214793176502",
          {
            "limit": 5,
            "window": 60000,
            "current": 6
          }
        ]
      ]
    },
    {
      "timestamp": "2025-08-16T21:21:29.649Z",
      "level": "warn",
      "message": "🚫 Rate limit excedido, cancelando petición:",
      "data": [
        [
          "/api/conversations/conv_+5214773790184_+5214793176502"
        ]
      ]
    },
    {
      "timestamp": "2025-08-16T21:21:29.649Z",
      "level": "error",
      "message": "[2025-08-16T21:21:29.649Z] [ERROR] [API] API Error: undefined undefined | Data: {\n  \"message\": \"Rate limit exceeded\"\n} | Error: Rate limit exceeded | Stack: Error: Rate limit exceeded\n    at http://localhost:5173/src/services/api.ts:33:13\n    at async Axios.request (http://localhost:5173/node_modules/.vite/deps/axios.js?v=de5ee7e0:2139:14)\n    at async ClientProfileService.getCompleteClientProfile (http://localhost:5173/src/services/clientProfile.ts?t=1755378164734:17:36)\n    at async http://localhost:5173/src/components/layout/RightSidebar.tsx?t=1755378619467:36:23"
    },
    {
      "timestamp": "2025-08-16T21:21:29.649Z",
      "level": "error",
      "message": "[2025-08-16T21:21:29.649Z] [ERROR] [API] Error en respuesta de API | Data: {\n  \"isNetworkError\": true,\n  \"isTimeout\": false\n} | Error: Rate limit exceeded | Stack: Error: Rate limit exceeded\n    at http://localhost:5173/src/services/api.ts:33:13\n    at async Axios.request (http://localhost:5173/node_modules/.vite/deps/axios.js?v=de5ee7e0:2139:14)\n    at async ClientProfileService.getCompleteClientProfile (http://localhost:5173/src/services/clientProfile.ts?t=1755378164734:17:36)\n    at async http://localhost:5173/src/components/layout/RightSidebar.tsx?t=1755378619467:36:23"
    },
    {
      "timestamp": "2025-08-16T21:21:29.649Z",
      "level": "error",
      "message": "Error obteniendo perfil completo del cliente:",
      "data": [
        [
          {}
        ]
      ]
    },
    {
      "timestamp": "2025-08-16T21:21:30.027Z",
      "level": "info",
      "message": "[2025-08-16T21:21:30.027Z] [INFO] [API] Response exitosa | Data: {\n  \"method\": \"GET\",\n  \"url\": \"/api/messages?conversationId=conv_%2B5214773790184_%2B5214793176502&limit=50\",\n  \"status\": 200,\n  \"statusText\": \"\"\n}"
    },
    {
      "timestamp": "2025-08-16T21:21:30.028Z",
      "level": "info",
      "message": "[2025-08-16T21:21:30.028Z] [INFO] [API] Token agregado a request | Data: {\n  \"method\": \"GET\",\n  \"url\": \"/api/conversations/conv_%2B5214773790184_%2B5214793176502\",\n  \"hasToken\": true,\n  \"tokenPreview\": \"eyJhbGciOiJIUzI1NiIs...\"\n}"
    },
    {
      "timestamp": "2025-08-16T21:21:30.028Z",
      "level": "info",
      "message": "[2025-08-16T21:21:30.028Z] [INFO] [API] ID de conversación formateado para backend | Data: {\n  \"originalId\": \"conv_%2B5214773790184_%2B5214793176502\",\n  \"decodedId\": \"conv_%2B5214773790184_%2B5214793176502\",\n  \"sanitizedId\": \"conv_%2B5214773790184_%2B5214793176502\",\n  \"backendFormat\": \"conv_+5214773790184_+5214793176502\",\n  \"method\": \"GET\",\n  \"url\": \"/api/conversations/conv_+5214773790184_+5214793176502\"\n}"
    },
    {
      "timestamp": "2025-08-16T21:21:30.029Z",
      "level": "warn",
      "message": "⚠️ convertMessages - Detectados mensajes de media sin URL ni contenido. Esto es normal para mensajes de WhatsApp que aún no se han procesado.",
      "data": [
        [
          null
        ]
      ]
    },
    {
      "timestamp": "2025-08-16T21:21:30.330Z",
      "level": "info",
      "message": "[2025-08-16T21:21:30.330Z] [INFO] [API] Response exitosa | Data: {\n  \"method\": \"GET\",\n  \"url\": \"/api/conversations/conv_+5214773790184_+5214793176502\",\n  \"status\": 200,\n  \"statusText\": \"\"\n}"
    }
  ]
}