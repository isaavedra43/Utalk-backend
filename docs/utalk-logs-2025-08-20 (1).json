{
  "exportDate": "2025-08-20T11:08:44.253Z",
  "totalLogs": 139,
  "logs": [
    {
      "timestamp": "2025-08-20T11:08:07.372Z",
      "level": "info",
      "message": "[2025-08-20T11:08:07.372Z] [INFO] [SYSTEM] Iniciando aplicación UTALK | Data: {\n  \"version\": \"1.0.0\",\n  \"environment\": \"development\",\n  \"debug\": true,\n  \"timestamp\": \"2025-08-20T11:08:07.372Z\"\n}"
    },
    {
      "timestamp": "2025-08-20T11:08:07.382Z",
      "level": "log",
      "message": "🔐 useAuth - No hay tokens en localStorage"
    },
    {
      "timestamp": "2025-08-20T11:08:07.383Z",
      "level": "log",
      "message": "🔐 useAuth - No hay tokens en localStorage"
    },
    {
      "timestamp": "2025-08-20T11:08:15.380Z",
      "level": "info",
      "message": "[2025-08-20T11:08:15.379Z] [INFO] [AUTH] Iniciando login con backend | Data: {\n  \"email\": \"admin@company.com\"\n}"
    },
    {
      "timestamp": "2025-08-20T11:08:15.382Z",
      "level": "log",
      "message": "🔐 useAuth - No hay tokens en localStorage"
    },
    {
      "timestamp": "2025-08-20T11:08:16.258Z",
      "level": "log",
      "message": "✅ Login exitoso, navegando al chat..."
    },
    {
      "timestamp": "2025-08-20T11:08:16.263Z",
      "level": "log",
      "message": "🔌 Iniciando conexión de socket..."
    },
    {
      "timestamp": "2025-08-20T11:08:16.263Z",
      "level": "log",
      "message": "🔌 Configurando socket con URL: wss://utalk-backend-production.up.railway.app",
      "data": [
        "🔌 Configurando socket con URL:",
        "wss://utalk-backend-production.up.railway.app"
      ]
    },
    {
      "timestamp": "2025-08-20T11:08:16.263Z",
      "level": "log",
      "message": "🔌 Token disponible: Sí",
      "data": [
        "🔌 Token disponible:",
        "Sí"
      ]
    },
    {
      "timestamp": "2025-08-20T11:08:16.263Z",
      "level": "log",
      "message": "🔌 Configuración de entorno: {\n  \"WS_URL\": \"wss://utalk-backend-production.up.railway.app\",\n  \"BACKEND_URL\": \"https://utalk-backend-production.up.railway.app\",\n  \"DEV_MODE\": true\n}",
      "data": [
        "🔌 Configuración de entorno:",
        {
          "WS_URL": "wss://utalk-backend-production.up.railway.app",
          "BACKEND_URL": "https://utalk-backend-production.up.railway.app",
          "DEV_MODE": true
        }
      ]
    },
    {
      "timestamp": "2025-08-20T11:08:16.263Z",
      "level": "log",
      "message": "🔌 Información del usuario para socket: {\n  \"workspaceId\": \"default_workspace\",\n  \"tenantId\": \"default_tenant\",\n  \"userId\": \"admin@company.com\",\n  \"email\": \"admin@company.com\"\n}",
      "data": [
        "🔌 Información del usuario para socket:",
        {
          "workspaceId": "default_workspace",
          "tenantId": "default_tenant",
          "userId": "admin@company.com",
          "email": "admin@company.com"
        }
      ]
    },
    {
      "timestamp": "2025-08-20T11:08:16.263Z",
      "level": "log",
      "message": "🔌 Conectando socket explícitamente..."
    },
    {
      "timestamp": "2025-08-20T11:08:16.264Z",
      "level": "log",
      "message": "🔌 Socket creado, conexión iniciada automáticamente"
    },
    {
      "timestamp": "2025-08-20T11:08:16.264Z",
      "level": "log",
      "message": "🔌 Ya hay una conexión en progreso, saltando..."
    },
    {
      "timestamp": "2025-08-20T11:08:16.266Z",
      "level": "log",
      "message": "🔄 Intento de reconexión 1/5 en 1000ms"
    },
    {
      "timestamp": "2025-08-20T11:08:16.358Z",
      "level": "log",
      "message": "✅ Login exitoso {\n  \"tiempoTotal\": \"8996ms\",\n  \"timestamp\": \"2025-08-20T11:08:16.358Z\"\n}",
      "data": [
        "✅ Login exitoso",
        {
          "tiempoTotal": "8996ms",
          "timestamp": "2025-08-20T11:08:16.358Z"
        }
      ]
    },
    {
      "timestamp": "2025-08-20T11:08:16.563Z",
      "level": "log",
      "message": "🔄 [DEBUG] useEffect RightSidebar - selectedConversationId cambió: {\n  \"selectedConversationId\": null\n}",
      "data": [
        "🔄 [DEBUG] useEffect RightSidebar - selectedConversationId cambió:",
        {
          "selectedConversationId": null
        }
      ]
    },
    {
      "timestamp": "2025-08-20T11:08:16.563Z",
      "level": "log",
      "message": "🧹 [DEBUG] No hay conversación seleccionada, limpiando perfil..."
    },
    {
      "timestamp": "2025-08-20T11:08:16.564Z",
      "level": "log",
      "message": "🔌 useConversationSync - Cleanup por desconexión..."
    },
    {
      "timestamp": "2025-08-20T11:08:16.564Z",
      "level": "log",
      "message": "🔄 [DEBUG] useEffect RightSidebar - selectedConversationId cambió: {\n  \"selectedConversationId\": null\n}",
      "data": [
        "🔄 [DEBUG] useEffect RightSidebar - selectedConversationId cambió:",
        {
          "selectedConversationId": null
        }
      ]
    },
    {
      "timestamp": "2025-08-20T11:08:16.564Z",
      "level": "log",
      "message": "🧹 [DEBUG] No hay conversación seleccionada, limpiando perfil..."
    },
    {
      "timestamp": "2025-08-20T11:08:16.565Z",
      "level": "log",
      "message": "🔌 useConversationSync - Cleanup por desconexión..."
    },
    {
      "timestamp": "2025-08-20T11:08:16.698Z",
      "level": "log",
      "message": "✅ WebSocket: Conectado exitosamente {\n  \"socketId\": \"MCxzSBnoRXPSJGpdAAAH\",\n  \"url\": \"wss://utalk-backend-production.up.railway.app\",\n  \"timestamp\": \"2025-08-20T11:08:16.698Z\",\n  \"workspaceId\": \"default_workspace\",\n  \"tenantId\": \"default_tenant\",\n  \"userId\": \"admin@company.com\"\n}",
      "data": [
        "✅ WebSocket: Conectado exitosamente",
        {
          "socketId": "MCxzSBnoRXPSJGpdAAAH",
          "url": "wss://utalk-backend-production.up.railway.app",
          "timestamp": "2025-08-20T11:08:16.698Z",
          "workspaceId": "default_workspace",
          "tenantId": "default_tenant",
          "userId": "admin@company.com"
        }
      ]
    },
    {
      "timestamp": "2025-08-20T11:08:16.698Z",
      "level": "log",
      "message": "✅ Socket conectado exitosamente: {\n  \"socketId\": \"MCxzSBnoRXPSJGpdAAAH\",\n  \"timestamp\": \"2025-08-20T11:08:16.698Z\",\n  \"reconnectAttempts\": 0\n}",
      "data": [
        "✅ Socket conectado exitosamente:",
        {
          "socketId": "MCxzSBnoRXPSJGpdAAAH",
          "timestamp": "2025-08-20T11:08:16.698Z",
          "reconnectAttempts": 0
        }
      ]
    },
    {
      "timestamp": "2025-08-20T11:08:16.699Z",
      "level": "log",
      "message": "✅ WebSocket conectado exitosamente"
    },
    {
      "timestamp": "2025-08-20T11:08:16.700Z",
      "level": "log",
      "message": "✅ WebSocket conectado exitosamente"
    },
    {
      "timestamp": "2025-08-20T11:08:16.902Z",
      "level": "log",
      "message": "🔍 [DEBUG] useClientProfileStore.getProfile iniciado: {\n  \"conversationId\": \"conv_+5214773790184_+5214793176502\"\n}",
      "data": [
        "🔍 [DEBUG] useClientProfileStore.getProfile iniciado:",
        {
          "conversationId": "conv_+5214773790184_+5214793176502"
        }
      ]
    },
    {
      "timestamp": "2025-08-20T11:08:16.902Z",
      "level": "log",
      "message": "🔄 [DEBUG] Cache miss en store, creando nueva petición..."
    },
    {
      "timestamp": "2025-08-20T11:08:16.902Z",
      "level": "log",
      "message": "🔄 Cargando perfil del cliente: conv_+5214773790184_+5214793176502",
      "data": [
        "🔄 Cargando perfil del cliente:",
        "conv_+5214773790184_+5214793176502"
      ]
    },
    {
      "timestamp": "2025-08-20T11:08:16.903Z",
      "level": "log",
      "message": "🔍 [DEBUG] Iniciando getCompleteClientProfile: {\n  \"conversationId\": \"conv_+5214773790184_+5214793176502\"\n}",
      "data": [
        "🔍 [DEBUG] Iniciando getCompleteClientProfile:",
        {
          "conversationId": "conv_+5214773790184_+5214793176502"
        }
      ]
    },
    {
      "timestamp": "2025-08-20T11:08:16.903Z",
      "level": "log",
      "message": "🔄 [DEBUG] Cache miss, haciendo petición a API..."
    },
    {
      "timestamp": "2025-08-20T11:08:16.903Z",
      "level": "log",
      "message": "🔄 [RETRY] Intento 1 para getCompleteClientProfile: conv_+5214773790184_+5214793176502",
      "data": [
        "🔄 [RETRY] Intento 1 para getCompleteClientProfile:",
        "conv_+5214773790184_+5214793176502"
      ]
    },
    {
      "timestamp": "2025-08-20T11:08:16.903Z",
      "level": "log",
      "message": "📡 [DEBUG] Haciendo petición a: /api/conversations/conv_+5214773790184_+5214793176502",
      "data": [
        "📡 [DEBUG] Haciendo petición a:",
        "/api/conversations/conv_+5214773790184_+5214793176502"
      ]
    },
    {
      "timestamp": "2025-08-20T11:08:16.903Z",
      "level": "log",
      "message": "🔍 [DEBUG] useClientProfileStore.getProfile iniciado: {\n  \"conversationId\": \"conv_+5214775211021_+5214793176502\"\n}",
      "data": [
        "🔍 [DEBUG] useClientProfileStore.getProfile iniciado:",
        {
          "conversationId": "conv_+5214775211021_+5214793176502"
        }
      ]
    },
    {
      "timestamp": "2025-08-20T11:08:16.903Z",
      "level": "log",
      "message": "🔄 [DEBUG] Cache miss en store, creando nueva petición..."
    },
    {
      "timestamp": "2025-08-20T11:08:16.903Z",
      "level": "log",
      "message": "🔄 Cargando perfil del cliente: conv_+5214775211021_+5214793176502",
      "data": [
        "🔄 Cargando perfil del cliente:",
        "conv_+5214775211021_+5214793176502"
      ]
    },
    {
      "timestamp": "2025-08-20T11:08:16.903Z",
      "level": "log",
      "message": "🔍 [DEBUG] Iniciando getCompleteClientProfile: {\n  \"conversationId\": \"conv_+5214775211021_+5214793176502\"\n}",
      "data": [
        "🔍 [DEBUG] Iniciando getCompleteClientProfile:",
        {
          "conversationId": "conv_+5214775211021_+5214793176502"
        }
      ]
    },
    {
      "timestamp": "2025-08-20T11:08:16.903Z",
      "level": "log",
      "message": "🔄 [DEBUG] Cache miss, haciendo petición a API..."
    },
    {
      "timestamp": "2025-08-20T11:08:16.903Z",
      "level": "log",
      "message": "🔄 [RETRY] Intento 1 para getCompleteClientProfile: conv_+5214775211021_+5214793176502",
      "data": [
        "🔄 [RETRY] Intento 1 para getCompleteClientProfile:",
        "conv_+5214775211021_+5214793176502"
      ]
    },
    {
      "timestamp": "2025-08-20T11:08:16.903Z",
      "level": "log",
      "message": "📡 [DEBUG] Haciendo petición a: /api/conversations/conv_+5214775211021_+5214793176502",
      "data": [
        "📡 [DEBUG] Haciendo petición a:",
        "/api/conversations/conv_+5214775211021_+5214793176502"
      ]
    },
    {
      "timestamp": "2025-08-20T11:08:16.903Z",
      "level": "log",
      "message": "🔍 [DEBUG] useClientProfileStore.getProfile iniciado: {\n  \"conversationId\": \"conv_+5214777270766_+5214793176502\"\n}",
      "data": [
        "🔍 [DEBUG] useClientProfileStore.getProfile iniciado:",
        {
          "conversationId": "conv_+5214777270766_+5214793176502"
        }
      ]
    },
    {
      "timestamp": "2025-08-20T11:08:16.903Z",
      "level": "log",
      "message": "🔄 [DEBUG] Cache miss en store, creando nueva petición..."
    },
    {
      "timestamp": "2025-08-20T11:08:16.903Z",
      "level": "log",
      "message": "🔄 Cargando perfil del cliente: conv_+5214777270766_+5214793176502",
      "data": [
        "🔄 Cargando perfil del cliente:",
        "conv_+5214777270766_+5214793176502"
      ]
    },
    {
      "timestamp": "2025-08-20T11:08:16.903Z",
      "level": "log",
      "message": "🔍 [DEBUG] Iniciando getCompleteClientProfile: {\n  \"conversationId\": \"conv_+5214777270766_+5214793176502\"\n}",
      "data": [
        "🔍 [DEBUG] Iniciando getCompleteClientProfile:",
        {
          "conversationId": "conv_+5214777270766_+5214793176502"
        }
      ]
    },
    {
      "timestamp": "2025-08-20T11:08:16.903Z",
      "level": "log",
      "message": "🔄 [DEBUG] Cache miss, haciendo petición a API..."
    },
    {
      "timestamp": "2025-08-20T11:08:16.903Z",
      "level": "log",
      "message": "🔄 [RETRY] Intento 1 para getCompleteClientProfile: conv_+5214777270766_+5214793176502",
      "data": [
        "🔄 [RETRY] Intento 1 para getCompleteClientProfile:",
        "conv_+5214777270766_+5214793176502"
      ]
    },
    {
      "timestamp": "2025-08-20T11:08:16.903Z",
      "level": "log",
      "message": "📡 [DEBUG] Haciendo petición a: /api/conversations/conv_+5214777270766_+5214793176502",
      "data": [
        "📡 [DEBUG] Haciendo petición a:",
        "/api/conversations/conv_+5214777270766_+5214793176502"
      ]
    },
    {
      "timestamp": "2025-08-20T11:08:16.903Z",
      "level": "log",
      "message": "🔍 [DEBUG] useClientProfileStore.getProfile iniciado: {\n  \"conversationId\": \"conv_+5214773790184_+5214793176502\"\n}",
      "data": [
        "🔍 [DEBUG] useClientProfileStore.getProfile iniciado:",
        {
          "conversationId": "conv_+5214773790184_+5214793176502"
        }
      ]
    },
    {
      "timestamp": "2025-08-20T11:08:16.903Z",
      "level": "log",
      "message": "🔄 Petición ya en curso, esperando resultado..."
    },
    {
      "timestamp": "2025-08-20T11:08:16.903Z",
      "level": "log",
      "message": "🔍 [DEBUG] useClientProfileStore.getProfile iniciado: {\n  \"conversationId\": \"conv_+5214775211021_+5214793176502\"\n}",
      "data": [
        "🔍 [DEBUG] useClientProfileStore.getProfile iniciado:",
        {
          "conversationId": "conv_+5214775211021_+5214793176502"
        }
      ]
    },
    {
      "timestamp": "2025-08-20T11:08:16.903Z",
      "level": "log",
      "message": "🔄 Petición ya en curso, esperando resultado..."
    },
    {
      "timestamp": "2025-08-20T11:08:16.903Z",
      "level": "log",
      "message": "🔍 [DEBUG] useClientProfileStore.getProfile iniciado: {\n  \"conversationId\": \"conv_+5214777270766_+5214793176502\"\n}",
      "data": [
        "🔍 [DEBUG] useClientProfileStore.getProfile iniciado:",
        {
          "conversationId": "conv_+5214777270766_+5214793176502"
        }
      ]
    },
    {
      "timestamp": "2025-08-20T11:08:16.903Z",
      "level": "log",
      "message": "🔄 Petición ya en curso, esperando resultado..."
    },
    {
      "timestamp": "2025-08-20T11:08:16.903Z",
      "level": "log",
      "message": "🔄 useChat - Cambio de conversación detectado: {\n  \"anterior\": null,\n  \"nueva\": \"\"\n}",
      "data": [
        "🔄 useChat - Cambio de conversación detectado:",
        {
          "anterior": null,
          "nueva": ""
        }
      ]
    },
    {
      "timestamp": "2025-08-20T11:08:16.904Z",
      "level": "log",
      "message": "🔍 [DEBUG] useClientProfileStore.getProfile iniciado: {\n  \"conversationId\": \"conv_+5214773790184_+5214793176502\"\n}",
      "data": [
        "🔍 [DEBUG] useClientProfileStore.getProfile iniciado:",
        {
          "conversationId": "conv_+5214773790184_+5214793176502"
        }
      ]
    },
    {
      "timestamp": "2025-08-20T11:08:16.904Z",
      "level": "log",
      "message": "🔄 Petición ya en curso, esperando resultado..."
    },
    {
      "timestamp": "2025-08-20T11:08:16.904Z",
      "level": "log",
      "message": "🔍 [DEBUG] useClientProfileStore.getProfile iniciado: {\n  \"conversationId\": \"conv_+5214775211021_+5214793176502\"\n}",
      "data": [
        "🔍 [DEBUG] useClientProfileStore.getProfile iniciado:",
        {
          "conversationId": "conv_+5214775211021_+5214793176502"
        }
      ]
    },
    {
      "timestamp": "2025-08-20T11:08:16.904Z",
      "level": "log",
      "message": "🔄 Petición ya en curso, esperando resultado..."
    },
    {
      "timestamp": "2025-08-20T11:08:16.904Z",
      "level": "log",
      "message": "🔍 [DEBUG] useClientProfileStore.getProfile iniciado: {\n  \"conversationId\": \"conv_+5214777270766_+5214793176502\"\n}",
      "data": [
        "🔍 [DEBUG] useClientProfileStore.getProfile iniciado:",
        {
          "conversationId": "conv_+5214777270766_+5214793176502"
        }
      ]
    },
    {
      "timestamp": "2025-08-20T11:08:16.904Z",
      "level": "log",
      "message": "🔄 Petición ya en curso, esperando resultado..."
    },
    {
      "timestamp": "2025-08-20T11:08:16.904Z",
      "level": "log",
      "message": "🔍 [DEBUG] useClientProfileStore.getProfile iniciado: {\n  \"conversationId\": \"conv_+5214773790184_+5214793176502\"\n}",
      "data": [
        "🔍 [DEBUG] useClientProfileStore.getProfile iniciado:",
        {
          "conversationId": "conv_+5214773790184_+5214793176502"
        }
      ]
    },
    {
      "timestamp": "2025-08-20T11:08:16.904Z",
      "level": "log",
      "message": "🔄 Petición ya en curso, esperando resultado..."
    },
    {
      "timestamp": "2025-08-20T11:08:16.904Z",
      "level": "log",
      "message": "🔍 [DEBUG] useClientProfileStore.getProfile iniciado: {\n  \"conversationId\": \"conv_+5214775211021_+5214793176502\"\n}",
      "data": [
        "🔍 [DEBUG] useClientProfileStore.getProfile iniciado:",
        {
          "conversationId": "conv_+5214775211021_+5214793176502"
        }
      ]
    },
    {
      "timestamp": "2025-08-20T11:08:16.904Z",
      "level": "log",
      "message": "🔄 Petición ya en curso, esperando resultado..."
    },
    {
      "timestamp": "2025-08-20T11:08:16.904Z",
      "level": "log",
      "message": "🔍 [DEBUG] useClientProfileStore.getProfile iniciado: {\n  \"conversationId\": \"conv_+5214777270766_+5214793176502\"\n}",
      "data": [
        "🔍 [DEBUG] useClientProfileStore.getProfile iniciado:",
        {
          "conversationId": "conv_+5214777270766_+5214793176502"
        }
      ]
    },
    {
      "timestamp": "2025-08-20T11:08:16.904Z",
      "level": "log",
      "message": "🔄 Petición ya en curso, esperando resultado..."
    },
    {
      "timestamp": "2025-08-20T11:08:17.223Z",
      "level": "log",
      "message": "📡 [DEBUG] Respuesta recibida: {\n  \"status\": 200,\n  \"success\": true,\n  \"hasData\": true\n}",
      "data": [
        "📡 [DEBUG] Respuesta recibida:",
        {
          "status": 200,
          "success": true,
          "hasData": true
        }
      ]
    },
    {
      "timestamp": "2025-08-20T11:08:17.223Z",
      "level": "log",
      "message": "✅ [DEBUG] Datos de conversación obtenidos: {\n  \"contactName\": \"Isra\",\n  \"customerPhone\": \"+5214773790184\",\n  \"channel\": \"whatsapp\",\n  \"status\": \"open\",\n  \"unreadCount\": 3,\n  \"lastMessageAt\": {\n    \"_seconds\": 1755683388,\n    \"_nanoseconds\": 76000000\n  },\n  \"createdAt\": {\n    \"_seconds\": 1755546558,\n    \"_nanoseconds\": 866000000\n  }\n}",
      "data": [
        "✅ [DEBUG] Datos de conversación obtenidos:",
        {
          "contactName": "Isra",
          "customerPhone": "+5214773790184",
          "channel": "whatsapp",
          "status": "open",
          "unreadCount": 3,
          "lastMessageAt": {
            "_seconds": 1755683388,
            "_nanoseconds": 76000000
          },
          "createdAt": {
            "_seconds": 1755546558,
            "_nanoseconds": 866000000
          }
        }
      ]
    },
    {
      "timestamp": "2025-08-20T11:08:17.223Z",
      "level": "log",
      "message": "🔧 [DEBUG] Formateando perfil del cliente..."
    },
    {
      "timestamp": "2025-08-20T11:08:17.223Z",
      "level": "log",
      "message": "✅ [DEBUG] Perfil formateado exitosamente: {\n  \"name\": \"Isra\",\n  \"phone\": \"+5214773790184\",\n  \"channel\": \"whatsapp\",\n  \"status\": \"open\"\n}",
      "data": [
        "✅ [DEBUG] Perfil formateado exitosamente:",
        {
          "name": "Isra",
          "phone": "+5214773790184",
          "channel": "whatsapp",
          "status": "open"
        }
      ]
    },
    {
      "timestamp": "2025-08-20T11:08:17.223Z",
      "level": "log",
      "message": "✅ [RETRY] Éxito en intento 1 para getCompleteClientProfile: conv_+5214773790184_+5214793176502",
      "data": [
        "✅ [RETRY] Éxito en intento 1 para getCompleteClientProfile:",
        "conv_+5214773790184_+5214793176502"
      ]
    },
    {
      "timestamp": "2025-08-20T11:08:17.223Z",
      "level": "log",
      "message": "💾 [DEBUG] Perfil guardado en cache"
    },
    {
      "timestamp": "2025-08-20T11:08:17.223Z",
      "level": "log",
      "message": "📊 [DEBUG] Resultado de clientProfileService: {\n  \"conversationId\": \"conv_+5214773790184_+5214793176502\",\n  \"hasProfile\": true,\n  \"profileName\": \"Isra\",\n  \"profilePhone\": \"+5214773790184\"\n}",
      "data": [
        "📊 [DEBUG] Resultado de clientProfileService:",
        {
          "conversationId": "conv_+5214773790184_+5214793176502",
          "hasProfile": true,
          "profileName": "Isra",
          "profilePhone": "+5214773790184"
        }
      ]
    },
    {
      "timestamp": "2025-08-20T11:08:17.224Z",
      "level": "log",
      "message": "✅ Perfil cargado exitosamente"
    },
    {
      "timestamp": "2025-08-20T11:08:17.224Z",
      "level": "log",
      "message": "🧹 [DEBUG] Limpieza completada para: conv_+5214773790184_+5214793176502",
      "data": [
        "🧹 [DEBUG] Limpieza completada para:",
        "conv_+5214773790184_+5214793176502"
      ]
    },
    {
      "timestamp": "2025-08-20T11:08:17.267Z",
      "level": "log",
      "message": "🔌 Socket ya conectado, saltando..."
    },
    {
      "timestamp": "2025-08-20T11:08:17.280Z",
      "level": "log",
      "message": "✅ WebSocket conectado exitosamente"
    },
    {
      "timestamp": "2025-08-20T11:08:17.290Z",
      "level": "log",
      "message": "✅ WebSocket conectado exitosamente"
    },
    {
      "timestamp": "2025-08-20T11:08:17.320Z",
      "level": "log",
      "message": "📡 [DEBUG] Respuesta recibida: {\n  \"status\": 200,\n  \"success\": true,\n  \"hasData\": true\n}",
      "data": [
        "📡 [DEBUG] Respuesta recibida:",
        {
          "status": 200,
          "success": true,
          "hasData": true
        }
      ]
    },
    {
      "timestamp": "2025-08-20T11:08:17.320Z",
      "level": "log",
      "message": "✅ [DEBUG] Datos de conversación obtenidos: {\n  \"contactName\": \"Israel Saavedra\",\n  \"customerPhone\": \"+5214777270766\",\n  \"channel\": \"whatsapp\",\n  \"status\": \"open\",\n  \"unreadCount\": 4,\n  \"lastMessageAt\": {\n    \"_seconds\": 1755546903,\n    \"_nanoseconds\": 780000000\n  },\n  \"createdAt\": {\n    \"_seconds\": 1755544852,\n    \"_nanoseconds\": 860000000\n  }\n}",
      "data": [
        "✅ [DEBUG] Datos de conversación obtenidos:",
        {
          "contactName": "Israel Saavedra",
          "customerPhone": "+5214777270766",
          "channel": "whatsapp",
          "status": "open",
          "unreadCount": 4,
          "lastMessageAt": {
            "_seconds": 1755546903,
            "_nanoseconds": 780000000
          },
          "createdAt": {
            "_seconds": 1755544852,
            "_nanoseconds": 860000000
          }
        }
      ]
    },
    {
      "timestamp": "2025-08-20T11:08:17.320Z",
      "level": "log",
      "message": "🔧 [DEBUG] Formateando perfil del cliente..."
    },
    {
      "timestamp": "2025-08-20T11:08:17.320Z",
      "level": "log",
      "message": "✅ [DEBUG] Perfil formateado exitosamente: {\n  \"name\": \"Israel Saavedra\",\n  \"phone\": \"+5214777270766\",\n  \"channel\": \"whatsapp\",\n  \"status\": \"open\"\n}",
      "data": [
        "✅ [DEBUG] Perfil formateado exitosamente:",
        {
          "name": "Israel Saavedra",
          "phone": "+5214777270766",
          "channel": "whatsapp",
          "status": "open"
        }
      ]
    },
    {
      "timestamp": "2025-08-20T11:08:17.320Z",
      "level": "log",
      "message": "✅ [RETRY] Éxito en intento 1 para getCompleteClientProfile: conv_+5214777270766_+5214793176502",
      "data": [
        "✅ [RETRY] Éxito en intento 1 para getCompleteClientProfile:",
        "conv_+5214777270766_+5214793176502"
      ]
    },
    {
      "timestamp": "2025-08-20T11:08:17.320Z",
      "level": "log",
      "message": "💾 [DEBUG] Perfil guardado en cache"
    },
    {
      "timestamp": "2025-08-20T11:08:17.320Z",
      "level": "log",
      "message": "📊 [DEBUG] Resultado de clientProfileService: {\n  \"conversationId\": \"conv_+5214777270766_+5214793176502\",\n  \"hasProfile\": true,\n  \"profileName\": \"Israel Saavedra\",\n  \"profilePhone\": \"+5214777270766\"\n}",
      "data": [
        "📊 [DEBUG] Resultado de clientProfileService:",
        {
          "conversationId": "conv_+5214777270766_+5214793176502",
          "hasProfile": true,
          "profileName": "Israel Saavedra",
          "profilePhone": "+5214777270766"
        }
      ]
    },
    {
      "timestamp": "2025-08-20T11:08:17.320Z",
      "level": "log",
      "message": "✅ Perfil cargado exitosamente"
    },
    {
      "timestamp": "2025-08-20T11:08:17.320Z",
      "level": "log",
      "message": "🧹 [DEBUG] Limpieza completada para: conv_+5214777270766_+5214793176502",
      "data": [
        "🧹 [DEBUG] Limpieza completada para:",
        "conv_+5214777270766_+5214793176502"
      ]
    },
    {
      "timestamp": "2025-08-20T11:08:17.381Z",
      "level": "log",
      "message": "✅ Estado sincronizado desde servidor (versión undefined)"
    },
    {
      "timestamp": "2025-08-20T11:08:17.381Z",
      "level": "log",
      "message": "🔌 useConversationSync - Estado sincronizado: {\n  \"conversations\": [\n    {\n      \"id\": \"conv_+5214773790184_+5214793176502\",\n      \"status\": \"open\",\n      \"customerPhone\": \"+5214773790184\",\n      \"assignedTo\": null,\n      \"lastMessage\": {\n        \"id\": \"SM65b8f9b02ced62f1e8b0f2d38ff0ba70\",\n        \"type\": \"text\",\n        \"sender\": \"agent:admin@company.com\",\n        \"direction\": \"outbound\",\n        \"messageId\": \"b52411f8-4356-4b4c-b303-b2195bae9ace\",\n        \"content\": \"HOLA\",\n        \"timestamp\": {\n          \"_seconds\": 1755683388,\n          \"_nanoseconds\": 76000000\n        }\n      },\n      \"lastMessageAt\": {\n        \"_seconds\": 1755683388,\n        \"_nanoseconds\": 76000000\n      },\n      \"unreadCount\": 3,\n      \"messageCount\": 8,\n      \"participants\": [\n        \"+5214773790184\",\n        \"admin@company.com\",\n        \"agent:admin@company.com\",\n        \"whatsapp:+5214773790184\"\n      ],\n      \"createdAt\": {\n        \"_seconds\": 1755546558,\n        \"_nanoseconds\": 866000000\n      },\n      \"updatedAt\": {\n        \"_seconds\": 1755683388,\n        \"_nanoseconds\": 213000000\n      }\n    },\n    {\n      \"id\": \"conv_+5214775211021_+5214793176502\",\n      \"status\": \"open\",\n      \"customerPhone\": \"+5214775211021\",\n      \"assignedTo\": null,\n      \"lastMessage\": {\n        \"id\": \"MM26999c163631b72e84ab82e3c40133ed\",\n        \"content\": \"\",\n        \"timestamp\": \"2025-08-18T20:04:40.480Z\",\n        \"sender\": \"customer\",\n        \"type\": \"image\"\n      },\n      \"lastMessageAt\": {\n        \"_seconds\": 1755547480,\n        \"_nanoseconds\": 729000000\n      },\n      \"unreadCount\": 21,\n      \"messageCount\": 21,\n      \"participants\": [\n        \"+5214775211021\",\n        \"admin@company.com\"\n      ],\n      \"createdAt\": {\n        \"_seconds\": 1755547340,\n        \"_nanoseconds\": 328000000\n      },\n      \"updatedAt\": {\n        \"_seconds\": 1755547480,\n        \"_nanoseconds\": 729000000\n      }\n    },\n    {\n      \"id\": \"conv_+5214777270766_+5214793176502\",\n      \"status\": \"open\",\n      \"customerPhone\": \"+5214777270766\",\n      \"assignedTo\": null,\n      \"lastMessage\": {\n        \"id\": \"MM79696223c7f84cf18d12f476e93da5a0\",\n        \"content\": \"\",\n        \"timestamp\": \"2025-08-18T19:55:03.464Z\",\n        \"sender\": \"customer\",\n        \"type\": \"image\"\n      },\n      \"lastMessageAt\": {\n        \"_seconds\": 1755546903,\n        \"_nanoseconds\": 780000000\n      },\n      \"unreadCount\": 4,\n      \"messageCount\": 5,\n      \"participants\": [\n        \"+5214777270766\",\n        \"admin@company.com\",\n        \"agent:admin@company.com\",\n        \"whatsapp:+5214777270766\"\n      ],\n      \"createdAt\": {\n        \"_seconds\": 1755544852,\n        \"_nanoseconds\": 860000000\n      },\n      \"updatedAt\": {\n        \"_seconds\": 1755546903,\n        \"_nanoseconds\": 780000000\n      }\n    }\n  ],\n  \"unreadCounts\": {},\n  \"onlineUsers\": {},\n  \"serverTime\": \"2025-08-20T11:08:17.471Z\",\n  \"syncId\": \"initial_1755688097471\"\n}",
      "data": [
        "🔌 useConversationSync - Estado sincronizado:",
        {
          "conversations": [
            {
              "id": "conv_+5214773790184_+5214793176502",
              "status": "open",
              "customerPhone": "+5214773790184",
              "assignedTo": null,
              "lastMessage": {
                "id": "SM65b8f9b02ced62f1e8b0f2d38ff0ba70",
                "type": "text",
                "sender": "agent:admin@company.com",
                "direction": "outbound",
                "messageId": "b52411f8-4356-4b4c-b303-b2195bae9ace",
                "content": "HOLA",
                "timestamp": {
                  "_seconds": 1755683388,
                  "_nanoseconds": 76000000
                }
              },
              "lastMessageAt": {
                "_seconds": 1755683388,
                "_nanoseconds": 76000000
              },
              "unreadCount": 3,
              "messageCount": 8,
              "participants": [
                "+5214773790184",
                "admin@company.com",
                "agent:admin@company.com",
                "whatsapp:+5214773790184"
              ],
              "createdAt": {
                "_seconds": 1755546558,
                "_nanoseconds": 866000000
              },
              "updatedAt": {
                "_seconds": 1755683388,
                "_nanoseconds": 213000000
              }
            },
            {
              "id": "conv_+5214775211021_+5214793176502",
              "status": "open",
              "customerPhone": "+5214775211021",
              "assignedTo": null,
              "lastMessage": {
                "id": "MM26999c163631b72e84ab82e3c40133ed",
                "content": "",
                "timestamp": "2025-08-18T20:04:40.480Z",
                "sender": "customer",
                "type": "image"
              },
              "lastMessageAt": {
                "_seconds": 1755547480,
                "_nanoseconds": 729000000
              },
              "unreadCount": 21,
              "messageCount": 21,
              "participants": [
                "+5214775211021",
                "admin@company.com"
              ],
              "createdAt": {
                "_seconds": 1755547340,
                "_nanoseconds": 328000000
              },
              "updatedAt": {
                "_seconds": 1755547480,
                "_nanoseconds": 729000000
              }
            },
            {
              "id": "conv_+5214777270766_+5214793176502",
              "status": "open",
              "customerPhone": "+5214777270766",
              "assignedTo": null,
              "lastMessage": {
                "id": "MM79696223c7f84cf18d12f476e93da5a0",
                "content": "",
                "timestamp": "2025-08-18T19:55:03.464Z",
                "sender": "customer",
                "type": "image"
              },
              "lastMessageAt": {
                "_seconds": 1755546903,
                "_nanoseconds": 780000000
              },
              "unreadCount": 4,
              "messageCount": 5,
              "participants": [
                "+5214777270766",
                "admin@company.com",
                "agent:admin@company.com",
                "whatsapp:+5214777270766"
              ],
              "createdAt": {
                "_seconds": 1755544852,
                "_nanoseconds": 860000000
              },
              "updatedAt": {
                "_seconds": 1755546903,
                "_nanoseconds": 780000000
              }
            }
          ],
          "unreadCounts": {},
          "onlineUsers": {},
          "serverTime": "2025-08-20T11:08:17.471Z",
          "syncId": "initial_1755688097471"
        }
      ]
    },
    {
      "timestamp": "2025-08-20T11:08:17.392Z",
      "level": "log",
      "message": "📡 [DEBUG] Respuesta recibida: {\n  \"status\": 200,\n  \"success\": true,\n  \"hasData\": true\n}",
      "data": [
        "📡 [DEBUG] Respuesta recibida:",
        {
          "status": 200,
          "success": true,
          "hasData": true
        }
      ]
    },
    {
      "timestamp": "2025-08-20T11:08:17.392Z",
      "level": "log",
      "message": "✅ [DEBUG] Datos de conversación obtenidos: {\n  \"contactName\": \"AV\",\n  \"customerPhone\": \"+5214775211021\",\n  \"channel\": \"whatsapp\",\n  \"status\": \"open\",\n  \"unreadCount\": 21,\n  \"lastMessageAt\": {\n    \"_seconds\": 1755547480,\n    \"_nanoseconds\": 729000000\n  },\n  \"createdAt\": {\n    \"_seconds\": 1755547340,\n    \"_nanoseconds\": 328000000\n  }\n}",
      "data": [
        "✅ [DEBUG] Datos de conversación obtenidos:",
        {
          "contactName": "AV",
          "customerPhone": "+5214775211021",
          "channel": "whatsapp",
          "status": "open",
          "unreadCount": 21,
          "lastMessageAt": {
            "_seconds": 1755547480,
            "_nanoseconds": 729000000
          },
          "createdAt": {
            "_seconds": 1755547340,
            "_nanoseconds": 328000000
          }
        }
      ]
    },
    {
      "timestamp": "2025-08-20T11:08:17.392Z",
      "level": "log",
      "message": "🔧 [DEBUG] Formateando perfil del cliente..."
    },
    {
      "timestamp": "2025-08-20T11:08:17.392Z",
      "level": "log",
      "message": "✅ [DEBUG] Perfil formateado exitosamente: {\n  \"name\": \"AV\",\n  \"phone\": \"+5214775211021\",\n  \"channel\": \"whatsapp\",\n  \"status\": \"open\"\n}",
      "data": [
        "✅ [DEBUG] Perfil formateado exitosamente:",
        {
          "name": "AV",
          "phone": "+5214775211021",
          "channel": "whatsapp",
          "status": "open"
        }
      ]
    },
    {
      "timestamp": "2025-08-20T11:08:17.392Z",
      "level": "log",
      "message": "✅ [RETRY] Éxito en intento 1 para getCompleteClientProfile: conv_+5214775211021_+5214793176502",
      "data": [
        "✅ [RETRY] Éxito en intento 1 para getCompleteClientProfile:",
        "conv_+5214775211021_+5214793176502"
      ]
    },
    {
      "timestamp": "2025-08-20T11:08:17.392Z",
      "level": "log",
      "message": "💾 [DEBUG] Perfil guardado en cache"
    },
    {
      "timestamp": "2025-08-20T11:08:17.392Z",
      "level": "log",
      "message": "📊 [DEBUG] Resultado de clientProfileService: {\n  \"conversationId\": \"conv_+5214775211021_+5214793176502\",\n  \"hasProfile\": true,\n  \"profileName\": \"AV\",\n  \"profilePhone\": \"+5214775211021\"\n}",
      "data": [
        "📊 [DEBUG] Resultado de clientProfileService:",
        {
          "conversationId": "conv_+5214775211021_+5214793176502",
          "hasProfile": true,
          "profileName": "AV",
          "profilePhone": "+5214775211021"
        }
      ]
    },
    {
      "timestamp": "2025-08-20T11:08:17.392Z",
      "level": "log",
      "message": "✅ Perfil cargado exitosamente"
    },
    {
      "timestamp": "2025-08-20T11:08:17.392Z",
      "level": "log",
      "message": "🧹 [DEBUG] Limpieza completada para: conv_+5214775211021_+5214793176502",
      "data": [
        "🧹 [DEBUG] Limpieza completada para:",
        "conv_+5214775211021_+5214793176502"
      ]
    },
    {
      "timestamp": "2025-08-20T11:08:17.701Z",
      "level": "log",
      "message": "🔄 Estado sincronizado con servidor"
    },
    {
      "timestamp": "2025-08-20T11:08:18.271Z",
      "level": "log",
      "message": "✅ Estado sincronizado desde servidor (versión undefined)"
    },
    {
      "timestamp": "2025-08-20T11:08:18.272Z",
      "level": "log",
      "message": "🔌 useConversationSync - Estado sincronizado: {\n  \"conversations\": [\n    {\n      \"id\": \"conv_+5214773790184_+5214793176502\",\n      \"status\": \"open\",\n      \"customerPhone\": \"+5214773790184\",\n      \"assignedTo\": null,\n      \"lastMessage\": {\n        \"id\": \"SM65b8f9b02ced62f1e8b0f2d38ff0ba70\",\n        \"type\": \"text\",\n        \"sender\": \"agent:admin@company.com\",\n        \"direction\": \"outbound\",\n        \"messageId\": \"b52411f8-4356-4b4c-b303-b2195bae9ace\",\n        \"content\": \"HOLA\",\n        \"timestamp\": {\n          \"_seconds\": 1755683388,\n          \"_nanoseconds\": 76000000\n        }\n      },\n      \"lastMessageAt\": {\n        \"_seconds\": 1755683388,\n        \"_nanoseconds\": 76000000\n      },\n      \"unreadCount\": 3,\n      \"messageCount\": 8,\n      \"participants\": [\n        \"+5214773790184\",\n        \"admin@company.com\",\n        \"agent:admin@company.com\",\n        \"whatsapp:+5214773790184\"\n      ],\n      \"createdAt\": {\n        \"_seconds\": 1755546558,\n        \"_nanoseconds\": 866000000\n      },\n      \"updatedAt\": {\n        \"_seconds\": 1755683388,\n        \"_nanoseconds\": 213000000\n      }\n    },\n    {\n      \"id\": \"conv_+5214775211021_+5214793176502\",\n      \"status\": \"open\",\n      \"customerPhone\": \"+5214775211021\",\n      \"assignedTo\": null,\n      \"lastMessage\": {\n        \"id\": \"MM26999c163631b72e84ab82e3c40133ed\",\n        \"content\": \"\",\n        \"timestamp\": \"2025-08-18T20:04:40.480Z\",\n        \"sender\": \"customer\",\n        \"type\": \"image\"\n      },\n      \"lastMessageAt\": {\n        \"_seconds\": 1755547480,\n        \"_nanoseconds\": 729000000\n      },\n      \"unreadCount\": 21,\n      \"messageCount\": 21,\n      \"participants\": [\n        \"+5214775211021\",\n        \"admin@company.com\"\n      ],\n      \"createdAt\": {\n        \"_seconds\": 1755547340,\n        \"_nanoseconds\": 328000000\n      },\n      \"updatedAt\": {\n        \"_seconds\": 1755547480,\n        \"_nanoseconds\": 729000000\n      }\n    },\n    {\n      \"id\": \"conv_+5214777270766_+5214793176502\",\n      \"status\": \"open\",\n      \"customerPhone\": \"+5214777270766\",\n      \"assignedTo\": null,\n      \"lastMessage\": {\n        \"id\": \"MM79696223c7f84cf18d12f476e93da5a0\",\n        \"content\": \"\",\n        \"timestamp\": \"2025-08-18T19:55:03.464Z\",\n        \"sender\": \"customer\",\n        \"type\": \"image\"\n      },\n      \"lastMessageAt\": {\n        \"_seconds\": 1755546903,\n        \"_nanoseconds\": 780000000\n      },\n      \"unreadCount\": 4,\n      \"messageCount\": 5,\n      \"participants\": [\n        \"+5214777270766\",\n        \"admin@company.com\",\n        \"agent:admin@company.com\",\n        \"whatsapp:+5214777270766\"\n      ],\n      \"createdAt\": {\n        \"_seconds\": 1755544852,\n        \"_nanoseconds\": 860000000\n      },\n      \"updatedAt\": {\n        \"_seconds\": 1755546903,\n        \"_nanoseconds\": 780000000\n      }\n    }\n  ],\n  \"unreadCounts\": {},\n  \"onlineUsers\": {},\n  \"serverTime\": \"2025-08-20T11:08:18.300Z\",\n  \"syncId\": 1755688098300\n}",
      "data": [
        "🔌 useConversationSync - Estado sincronizado:",
        {
          "conversations": [
            {
              "id": "conv_+5214773790184_+5214793176502",
              "status": "open",
              "customerPhone": "+5214773790184",
              "assignedTo": null,
              "lastMessage": {
                "id": "SM65b8f9b02ced62f1e8b0f2d38ff0ba70",
                "type": "text",
                "sender": "agent:admin@company.com",
                "direction": "outbound",
                "messageId": "b52411f8-4356-4b4c-b303-b2195bae9ace",
                "content": "HOLA",
                "timestamp": {
                  "_seconds": 1755683388,
                  "_nanoseconds": 76000000
                }
              },
              "lastMessageAt": {
                "_seconds": 1755683388,
                "_nanoseconds": 76000000
              },
              "unreadCount": 3,
              "messageCount": 8,
              "participants": [
                "+5214773790184",
                "admin@company.com",
                "agent:admin@company.com",
                "whatsapp:+5214773790184"
              ],
              "createdAt": {
                "_seconds": 1755546558,
                "_nanoseconds": 866000000
              },
              "updatedAt": {
                "_seconds": 1755683388,
                "_nanoseconds": 213000000
              }
            },
            {
              "id": "conv_+5214775211021_+5214793176502",
              "status": "open",
              "customerPhone": "+5214775211021",
              "assignedTo": null,
              "lastMessage": {
                "id": "MM26999c163631b72e84ab82e3c40133ed",
                "content": "",
                "timestamp": "2025-08-18T20:04:40.480Z",
                "sender": "customer",
                "type": "image"
              },
              "lastMessageAt": {
                "_seconds": 1755547480,
                "_nanoseconds": 729000000
              },
              "unreadCount": 21,
              "messageCount": 21,
              "participants": [
                "+5214775211021",
                "admin@company.com"
              ],
              "createdAt": {
                "_seconds": 1755547340,
                "_nanoseconds": 328000000
              },
              "updatedAt": {
                "_seconds": 1755547480,
                "_nanoseconds": 729000000
              }
            },
            {
              "id": "conv_+5214777270766_+5214793176502",
              "status": "open",
              "customerPhone": "+5214777270766",
              "assignedTo": null,
              "lastMessage": {
                "id": "MM79696223c7f84cf18d12f476e93da5a0",
                "content": "",
                "timestamp": "2025-08-18T19:55:03.464Z",
                "sender": "customer",
                "type": "image"
              },
              "lastMessageAt": {
                "_seconds": 1755546903,
                "_nanoseconds": 780000000
              },
              "unreadCount": 4,
              "messageCount": 5,
              "participants": [
                "+5214777270766",
                "admin@company.com",
                "agent:admin@company.com",
                "whatsapp:+5214777270766"
              ],
              "createdAt": {
                "_seconds": 1755544852,
                "_nanoseconds": 860000000
              },
              "updatedAt": {
                "_seconds": 1755546903,
                "_nanoseconds": 780000000
              }
            }
          ],
          "unreadCounts": {},
          "onlineUsers": {},
          "serverTime": "2025-08-20T11:08:18.300Z",
          "syncId": 1755688098300
        }
      ]
    },
    {
      "timestamp": "2025-08-20T11:08:18.315Z",
      "level": "log",
      "message": "�� ID de conversación codificado correctamente en URL | Data: {\n  \"originalId\": \"conv_+5214773790184_+5214793176502\",\n  \"decodedId\": \"conv_+5214773790184_+5214793176502\",\n  \"sanitizedId\": \"conv_+5214773790184_+5214793176502\",\n  \"encodedId\": \"conv_%2B5214773790184_%2B5214793176502\",\n  \"method\": \"encodeConversationIdForUrl\"\n}",
      "data": [
        "�� ID de conversación codificado correctamente en URL | Data:",
        {
          "originalId": "conv_+5214773790184_+5214793176502",
          "decodedId": "conv_+5214773790184_+5214793176502",
          "sanitizedId": "conv_+5214773790184_+5214793176502",
          "encodedId": "conv_%2B5214773790184_%2B5214793176502",
          "method": "encodeConversationIdForUrl"
        }
      ]
    },
    {
      "timestamp": "2025-08-20T11:08:18.315Z",
      "level": "log",
      "message": "✅ useConversationActions - Conversación seleccionada: conv_+5214773790184_+5214793176502",
      "data": [
        "✅ useConversationActions - Conversación seleccionada:",
        "conv_+5214773790184_+5214793176502"
      ]
    },
    {
      "timestamp": "2025-08-20T11:08:18.335Z",
      "level": "log",
      "message": "🔄 useChat - Cambio de conversación detectado: {\n  \"anterior\": \"\",\n  \"nueva\": \"conv_+5214773790184_+5214793176502\"\n}",
      "data": [
        "🔄 useChat - Cambio de conversación detectado:",
        {
          "anterior": "",
          "nueva": "conv_+5214773790184_+5214793176502"
        }
      ]
    },
    {
      "timestamp": "2025-08-20T11:08:18.335Z",
      "level": "log",
      "message": "🎧 useChat - Configurando listeners para conversación: conv_+5214773790184_+5214793176502",
      "data": [
        "🎧 useChat - Configurando listeners para conversación:",
        "conv_+5214773790184_+5214793176502"
      ]
    },
    {
      "timestamp": "2025-08-20T11:08:18.335Z",
      "level": "log",
      "message": "�� ID de conversación codificado correctamente en URL | Data: {\n  \"originalId\": \"conv_+5214773790184_+5214793176502\",\n  \"decodedId\": \"conv_+5214773790184_+5214793176502\",\n  \"sanitizedId\": \"conv_+5214773790184_+5214793176502\",\n  \"encodedId\": \"conv_%2B5214773790184_%2B5214793176502\",\n  \"method\": \"encodeConversationIdForUrl\"\n}",
      "data": [
        "�� ID de conversación codificado correctamente en URL | Data:",
        {
          "originalId": "conv_+5214773790184_+5214793176502",
          "decodedId": "conv_+5214773790184_+5214793176502",
          "sanitizedId": "conv_+5214773790184_+5214793176502",
          "encodedId": "conv_%2B5214773790184_%2B5214793176502",
          "method": "encodeConversationIdForUrl"
        }
      ]
    },
    {
      "timestamp": "2025-08-20T11:08:18.336Z",
      "level": "log",
      "message": "🔄 [DEBUG] useEffect RightSidebar - selectedConversationId cambió: {\n  \"selectedConversationId\": \"conv_+5214773790184_+5214793176502\"\n}",
      "data": [
        "🔄 [DEBUG] useEffect RightSidebar - selectedConversationId cambió:",
        {
          "selectedConversationId": "conv_+5214773790184_+5214793176502"
        }
      ]
    },
    {
      "timestamp": "2025-08-20T11:08:18.336Z",
      "level": "log",
      "message": "📞 [DEBUG] Llamando a loadClientProfile..."
    },
    {
      "timestamp": "2025-08-20T11:08:18.336Z",
      "level": "log",
      "message": "📞 [DEBUG] Llamando a getProfile..."
    },
    {
      "timestamp": "2025-08-20T11:08:18.336Z",
      "level": "log",
      "message": "🔍 [DEBUG] useClientProfileStore.getProfile iniciado: {\n  \"conversationId\": \"conv_+5214773790184_+5214793176502\"\n}",
      "data": [
        "🔍 [DEBUG] useClientProfileStore.getProfile iniciado:",
        {
          "conversationId": "conv_+5214773790184_+5214793176502"
        }
      ]
    },
    {
      "timestamp": "2025-08-20T11:08:18.336Z",
      "level": "log",
      "message": "✅ Usando perfil desde cache"
    },
    {
      "timestamp": "2025-08-20T11:08:18.336Z",
      "level": "log",
      "message": "�� ID de conversación codificado correctamente en URL | Data: {\n  \"originalId\": \"conv_+5214773790184_+5214793176502\",\n  \"decodedId\": \"conv_+5214773790184_+5214793176502\",\n  \"sanitizedId\": \"conv_+5214773790184_+5214793176502\",\n  \"encodedId\": \"conv_%2B5214773790184_%2B5214793176502\",\n  \"method\": \"encodeConversationIdForUrl\"\n}",
      "data": [
        "�� ID de conversación codificado correctamente en URL | Data:",
        {
          "originalId": "conv_+5214773790184_+5214793176502",
          "decodedId": "conv_+5214773790184_+5214793176502",
          "sanitizedId": "conv_+5214773790184_+5214793176502",
          "encodedId": "conv_%2B5214773790184_%2B5214793176502",
          "method": "encodeConversationIdForUrl"
        }
      ]
    },
    {
      "timestamp": "2025-08-20T11:08:18.336Z",
      "level": "log",
      "message": "📊 [DEBUG] Resultado de getProfile: {\n  \"conversationId\": \"conv_+5214773790184_+5214793176502\",\n  \"hasProfile\": true,\n  \"profileName\": \"Isra\",\n  \"profilePhone\": \"+5214773790184\",\n  \"profileChannel\": \"whatsapp\"\n}",
      "data": [
        "📊 [DEBUG] Resultado de getProfile:",
        {
          "conversationId": "conv_+5214773790184_+5214793176502",
          "hasProfile": true,
          "profileName": "Isra",
          "profilePhone": "+5214773790184",
          "profileChannel": "whatsapp"
        }
      ]
    },
    {
      "timestamp": "2025-08-20T11:08:18.336Z",
      "level": "log",
      "message": "✅ [DEBUG] Perfil obtenido, actualizando estado..."
    },
    {
      "timestamp": "2025-08-20T11:08:18.336Z",
      "level": "log",
      "message": "🏁 [DEBUG] Finalizando carga..."
    },
    {
      "timestamp": "2025-08-20T11:08:18.356Z",
      "level": "log",
      "message": "�� ID de conversación codificado correctamente en URL | Data: {\n  \"originalId\": \"conv_+5214773790184_+5214793176502\",\n  \"decodedId\": \"conv_+5214773790184_+5214793176502\",\n  \"sanitizedId\": \"conv_+5214773790184_+5214793176502\",\n  \"encodedId\": \"conv_%2B5214773790184_%2B5214793176502\",\n  \"method\": \"encodeConversationIdForUrl\"\n}",
      "data": [
        "�� ID de conversación codificado correctamente en URL | Data:",
        {
          "originalId": "conv_+5214773790184_+5214793176502",
          "decodedId": "conv_+5214773790184_+5214793176502",
          "sanitizedId": "conv_+5214773790184_+5214793176502",
          "encodedId": "conv_%2B5214773790184_%2B5214793176502",
          "method": "encodeConversationIdForUrl"
        }
      ]
    },
    {
      "timestamp": "2025-08-20T11:08:19.337Z",
      "level": "log",
      "message": "🔗 useChat - Uniéndose a conversación: conv_+5214773790184_+5214793176502",
      "data": [
        "🔗 useChat - Uniéndose a conversación:",
        "conv_+5214773790184_+5214793176502"
      ]
    },
    {
      "timestamp": "2025-08-20T11:08:19.337Z",
      "level": "log",
      "message": "🔍 ID de Conversación joinConversation: {\n  \"id\": \"conv_+5214773790184_+5214793176502\",\n  \"isValid\": true,\n  \"phones\": {\n    \"phone1\": \"+5214773790184\",\n    \"phone2\": \"+5214793176502\"\n  },\n  \"length\": 34\n}",
      "data": [
        "🔍 ID de Conversación joinConversation:",
        {
          "id": "conv_+5214773790184_+5214793176502",
          "isValid": true,
          "phones": {
            "phone1": "+5214773790184",
            "phone2": "+5214793176502"
          },
          "length": 34
        }
      ]
    },
    {
      "timestamp": "2025-08-20T11:08:19.337Z",
      "level": "log",
      "message": "🔗 Room ID generado (formato simplificado): {\n  \"conversationId\": \"conv_+5214773790184_+5214793176502\",\n  \"roomId\": \"conversation:conv_+5214773790184_+5214793176502\",\n  \"userId\": \"admin@company.com\"\n}",
      "data": [
        "🔗 Room ID generado (formato simplificado):",
        {
          "conversationId": "conv_+5214773790184_+5214793176502",
          "roomId": "conversation:conv_+5214773790184_+5214793176502",
          "userId": "admin@company.com"
        }
      ]
    },
    {
      "timestamp": "2025-08-20T11:08:19.337Z",
      "level": "log",
      "message": "🔗 join-conversation - Room ID generado: conversation:conv_+5214773790184_+5214793176502",
      "data": [
        "🔗 join-conversation - Room ID generado:",
        "conversation:conv_+5214773790184_+5214793176502"
      ]
    },
    {
      "timestamp": "2025-08-20T11:08:19.337Z",
      "level": "log",
      "message": "🔗 Uniendo a conversación: conv_+5214773790184_+5214793176502"
    },
    {
      "timestamp": "2025-08-20T11:08:19.337Z",
      "level": "log",
      "message": "�� ID de conversación codificado correctamente en URL | Data: {\n  \"originalId\": \"conv_+5214773790184_+5214793176502\",\n  \"decodedId\": \"conv_+5214773790184_+5214793176502\",\n  \"sanitizedId\": \"conv_+5214773790184_+5214793176502\",\n  \"encodedId\": \"conv_%2B5214773790184_%2B5214793176502\",\n  \"method\": \"encodeConversationIdForUrl\"\n}",
      "data": [
        "�� ID de conversación codificado correctamente en URL | Data:",
        {
          "originalId": "conv_+5214773790184_+5214793176502",
          "decodedId": "conv_+5214773790184_+5214793176502",
          "sanitizedId": "conv_+5214773790184_+5214793176502",
          "encodedId": "conv_%2B5214773790184_%2B5214793176502",
          "method": "encodeConversationIdForUrl"
        }
      ]
    },
    {
      "timestamp": "2025-08-20T11:08:19.338Z",
      "level": "log",
      "message": "🔍 ID de Conversación loadMessages: {\n  \"id\": \"conv_+5214773790184_+5214793176502\",\n  \"isValid\": true,\n  \"phones\": {\n    \"phone1\": \"+5214773790184\",\n    \"phone2\": \"+5214793176502\"\n  },\n  \"length\": 34\n}",
      "data": [
        "🔍 ID de Conversación loadMessages:",
        {
          "id": "conv_+5214773790184_+5214793176502",
          "isValid": true,
          "phones": {
            "phone1": "+5214773790184",
            "phone2": "+5214793176502"
          },
          "length": 34
        }
      ]
    },
    {
      "timestamp": "2025-08-20T11:08:19.516Z",
      "level": "log",
      "message": "🔌 useConversationSync - Usuario se unió a conversación: {\n  \"conversationId\": \"conv_+5214773790184_+5214793176502\",\n  \"roomId\": \"ws:default_workspace:ten:default_tenant:conv:conv_+5214773790184_+5214793176502\",\n  \"onlineUsers\": [\n    \"admin@company.com\"\n  ],\n  \"success\": true,\n  \"timestamp\": \"2025-08-20T11:08:19.606Z\"\n}",
      "data": [
        "🔌 useConversationSync - Usuario se unió a conversación:",
        {
          "conversationId": "conv_+5214773790184_+5214793176502",
          "roomId": "ws:default_workspace:ten:default_tenant:conv:conv_+5214773790184_+5214793176502",
          "onlineUsers": [
            "admin@company.com"
          ],
          "success": true,
          "timestamp": "2025-08-20T11:08:19.606Z"
        }
      ]
    },
    {
      "timestamp": "2025-08-20T11:08:19.844Z",
      "level": "log",
      "message": "🔍 ID de Conversación loadConversation: {\n  \"id\": \"conv_+5214773790184_+5214793176502\",\n  \"isValid\": true,\n  \"phones\": {\n    \"phone1\": \"+5214773790184\",\n    \"phone2\": \"+5214793176502\"\n  },\n  \"length\": 34\n}",
      "data": [
        "🔍 ID de Conversación loadConversation:",
        {
          "id": "conv_+5214773790184_+5214793176502",
          "isValid": true,
          "phones": {
            "phone1": "+5214773790184",
            "phone2": "+5214793176502"
          },
          "length": 34
        }
      ]
    },
    {
      "timestamp": "2025-08-20T11:08:19.844Z",
      "level": "log",
      "message": "�� ID de conversación codificado correctamente en URL | Data: {\n  \"originalId\": \"conv_+5214773790184_+5214793176502\",\n  \"decodedId\": \"conv_+5214773790184_+5214793176502\",\n  \"sanitizedId\": \"conv_+5214773790184_+5214793176502\",\n  \"encodedId\": \"conv_%2B5214773790184_%2B5214793176502\",\n  \"method\": \"encodeConversationIdForUrl\"\n}",
      "data": [
        "�� ID de conversación codificado correctamente en URL | Data:",
        {
          "originalId": "conv_+5214773790184_+5214793176502",
          "decodedId": "conv_+5214773790184_+5214793176502",
          "sanitizedId": "conv_+5214773790184_+5214793176502",
          "encodedId": "conv_%2B5214773790184_%2B5214793176502",
          "method": "encodeConversationIdForUrl"
        }
      ]
    },
    {
      "timestamp": "2025-08-20T11:08:19.844Z",
      "level": "log",
      "message": "🔍 ID de Conversación getConversation: {\n  \"id\": \"conv_+5214773790184_+5214793176502\",\n  \"isValid\": true,\n  \"phones\": {\n    \"phone1\": \"+5214773790184\",\n    \"phone2\": \"+5214793176502\"\n  },\n  \"length\": 34\n}",
      "data": [
        "🔍 ID de Conversación getConversation:",
        {
          "id": "conv_+5214773790184_+5214793176502",
          "isValid": true,
          "phones": {
            "phone1": "+5214773790184",
            "phone2": "+5214793176502"
          },
          "length": 34
        }
      ]
    },
    {
      "timestamp": "2025-08-20T11:08:19.848Z",
      "level": "log",
      "message": "✅ useChat - Mensajes cargados exitosamente, estableciendo isJoined como true"
    },
    {
      "timestamp": "2025-08-20T11:08:19.859Z",
      "level": "log",
      "message": "🔍 [DEBUG] useClientProfileStore.getProfile iniciado: {\n  \"conversationId\": \"conv_+5214773790184_+5214793176502\"\n}",
      "data": [
        "🔍 [DEBUG] useClientProfileStore.getProfile iniciado:",
        {
          "conversationId": "conv_+5214773790184_+5214793176502"
        }
      ]
    },
    {
      "timestamp": "2025-08-20T11:08:19.859Z",
      "level": "log",
      "message": "✅ Usando perfil desde cache"
    },
    {
      "timestamp": "2025-08-20T11:08:19.860Z",
      "level": "log",
      "message": "🔍 [DEBUG] useClientProfileStore.getProfile iniciado: {\n  \"conversationId\": \"conv_+5214773790184_+5214793176502\"\n}",
      "data": [
        "🔍 [DEBUG] useClientProfileStore.getProfile iniciado:",
        {
          "conversationId": "conv_+5214773790184_+5214793176502"
        }
      ]
    },
    {
      "timestamp": "2025-08-20T11:08:19.860Z",
      "level": "log",
      "message": "✅ Usando perfil desde cache"
    },
    {
      "timestamp": "2025-08-20T11:08:20.124Z",
      "level": "log",
      "message": "✅ useChat - Conversación cargada: {}",
      "data": [
        "✅ useChat - Conversación cargada:",
        {}
      ]
    },
    {
      "timestamp": "2025-08-20T11:08:20.124Z",
      "level": "log",
      "message": "✅ useChat - Mensajes cargados, estableciendo isJoined como true"
    },
    {
      "timestamp": "2025-08-20T11:08:24.311Z",
      "level": "log",
      "message": "📁 Archivo seleccionado: Captura de pantalla 2025-08-20 a las 3.42.43 a. m..png Tamaño: 953858 Tipo: image/png",
      "data": [
        "📁 Archivo seleccionado:",
        "Captura de pantalla 2025-08-20 a las 3.42.43 a. m..png",
        "Tamaño:",
        953858,
        "Tipo:",
        "image/png"
      ]
    },
    {
      "timestamp": "2025-08-20T11:08:24.311Z",
      "level": "log",
      "message": "🚀 Subiendo archivo: Captura de pantalla 2025-08-20 a las 3.42.43 a. m..png",
      "data": [
        "🚀 Subiendo archivo:",
        "Captura de pantalla 2025-08-20 a las 3.42.43 a. m..png"
      ]
    },
    {
      "timestamp": "2025-08-20T11:08:25.229Z",
      "level": "error",
      "message": "[2025-08-20T11:08:25.229Z] [ERROR] [API] API Error: POST /api/media/upload | Data: {\n  \"status\": 500,\n  \"data\": {\n    \"success\": false,\n    \"error\": \"UPLOAD_FAILED\",\n    \"message\": \"Error subiendo archivo\",\n    \"suggestion\": \"Intenta nuevamente o contacta soporte si el problema persiste\",\n    \"docs\": \"https://api.utalk.com/docs/general/errors\",\n    \"help\": \"Si necesitas ayuda, contacta soporte@utalk.com y menciona el código de error 'UPLOAD_FAILED'\",\n    \"details\": {\n      \"originalError\": \"Cannot read properties of undefined (reading 'isWhatsAppCompatible')\"\n    },\n    \"timestamp\": \"2025-08-20T11:08:25.315Z\"\n  },\n  \"message\": \"Request failed with status code 500\"\n} | Error: Request failed with status code 500 | Stack: AxiosError: Request failed with status code 500\n    at settle (http://localhost:5173/node_modules/.vite/deps/axios.js?v=7c71f447:1253:12)\n    at XMLHttpRequest.onloadend (http://localhost:5173/node_modules/.vite/deps/axios.js?v=7c71f447:1585:7)"
    },
    {
      "timestamp": "2025-08-20T11:08:25.229Z",
      "level": "error",
      "message": "[2025-08-20T11:08:25.229Z] [ERROR] [API] Error en respuesta de API | Data: {\n  \"method\": \"POST\",\n  \"url\": \"/api/media/upload\",\n  \"status\": 500,\n  \"statusText\": \"\",\n  \"errorData\": {\n    \"success\": false,\n    \"error\": \"UPLOAD_FAILED\",\n    \"message\": \"Error subiendo archivo\",\n    \"suggestion\": \"Intenta nuevamente o contacta soporte si el problema persiste\",\n    \"docs\": \"https://api.utalk.com/docs/general/errors\",\n    \"help\": \"Si necesitas ayuda, contacta soporte@utalk.com y menciona el código de error 'UPLOAD_FAILED'\",\n    \"details\": {\n      \"originalError\": \"Cannot read properties of undefined (reading 'isWhatsAppCompatible')\"\n    },\n    \"timestamp\": \"2025-08-20T11:08:25.315Z\"\n  },\n  \"isNetworkError\": false,\n  \"isTimeout\": false\n} | Error: Request failed with status code 500 | Stack: AxiosError: Request failed with status code 500\n    at settle (http://localhost:5173/node_modules/.vite/deps/axios.js?v=7c71f447:1253:12)\n    at XMLHttpRequest.onloadend (http://localhost:5173/node_modules/.vite/deps/axios.js?v=7c71f447:1585:7)"
    },
    {
      "timestamp": "2025-08-20T11:08:25.230Z",
      "level": "error",
      "message": "❌ Error subiendo archivo: {\n  \"message\": \"Request failed with status code 500\",\n  \"name\": \"AxiosError\",\n  \"stack\": \"AxiosError: Request failed with status code 500\\n    at settle (http://localhost:5173/node_modules/.vite/deps/axios.js?v=7c71f447:1253:12)\\n    at XMLHttpRequest.onloadend (http://localhost:5173/node_modules/.vite/deps/axios.js?v=7c71f447:1585:7)\\n    at Axios.request (http://localhost:5173/node_modules/.vite/deps/axios.js?v=7c71f447:2143:41)\\n    at async Object.uploadFile (http://localhost:5173/src/services/fileUpload.ts:10:22)\\n    at async uploadAndSend (http://localhost:5173/src/components/chat/MessageInput.tsx?t=1755687543327:372:44)\",\n  \"config\": {\n    \"transitional\": {\n      \"silentJSONParsing\": true,\n      \"forcedJSONParsing\": true,\n      \"clarifyTimeoutError\": false\n    },\n    \"adapter\": [\n      \"xhr\",\n      \"http\",\n      \"fetch\"\n    ],\n    \"transformRequest\": [\n      null\n    ],\n    \"transformResponse\": [\n      null\n    ],\n    \"timeout\": 30000,\n    \"xsrfCookieName\": \"XSRF-TOKEN\",\n    \"xsrfHeaderName\": \"X-XSRF-TOKEN\",\n    \"maxContentLength\": -1,\n    \"maxBodyLength\": -1,\n    \"env\": {},\n    \"headers\": {\n      \"Accept\": \"application/json, text/plain, */*\",\n      \"Content-Type\": \"multipart/form-data\",\n      \"Authorization\": \"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJlbWFpbCI6ImFkbWluQGNvbXBhbnkuY29tIiwicm9sZSI6ImFkbWluIiwibmFtZSI6IkFkbWluaXN0cmFkb3IgZGVsIFNpc3RlbWEiLCJ0eXBlIjoiYWNjZXNzIiwidXNlcklkIjoiYWRtaW5AY29tcGFueS5jb20iLCJ3b3Jrc3BhY2VJZCI6ImRlZmF1bHRfd29ya3NwYWNlIiwidGVuYW50SWQiOiJkZWZhdWx0X3RlbmFudCIsImlhdCI6MTc1NTY4ODA5NiwiZXhwIjoxNzU1Njg4OTk2LCJhdWQiOiJ1dGFsay1hcGkiLCJpc3MiOiJ1dGFsay1iYWNrZW5kIn0.x2OdQmXzuaztXMm-GC8le__-_sjXI-DuIWSSfpjBzZ8\"\n    },\n    \"baseURL\": \"https://utalk-backend-production.up.railway.app\",\n    \"method\": \"post\",\n    \"url\": \"/api/media/upload\",\n    \"data\": {},\n    \"allowAbsoluteUrls\": true\n  },\n  \"code\": \"ERR_BAD_RESPONSE\",\n  \"status\": 500\n}",
      "data": [
        "❌ Error subiendo archivo:",
        {
          "message": "Request failed with status code 500",
          "name": "AxiosError",
          "stack": "AxiosError: Request failed with status code 500\n    at settle (http://localhost:5173/node_modules/.vite/deps/axios.js?v=7c71f447:1253:12)\n    at XMLHttpRequest.onloadend (http://localhost:5173/node_modules/.vite/deps/axios.js?v=7c71f447:1585:7)\n    at Axios.request (http://localhost:5173/node_modules/.vite/deps/axios.js?v=7c71f447:2143:41)\n    at async Object.uploadFile (http://localhost:5173/src/services/fileUpload.ts:10:22)\n    at async uploadAndSend (http://localhost:5173/src/components/chat/MessageInput.tsx?t=1755687543327:372:44)",
          "config": {
            "transitional": {
              "silentJSONParsing": true,
              "forcedJSONParsing": true,
              "clarifyTimeoutError": false
            },
            "adapter": [
              "xhr",
              "http",
              "fetch"
            ],
            "transformRequest": [
              null
            ],
            "transformResponse": [
              null
            ],
            "timeout": 30000,
            "xsrfCookieName": "XSRF-TOKEN",
            "xsrfHeaderName": "X-XSRF-TOKEN",
            "maxContentLength": -1,
            "maxBodyLength": -1,
            "env": {},
            "headers": {
              "Accept": "application/json, text/plain, */*",
              "Content-Type": "multipart/form-data",
              "Authorization": "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJlbWFpbCI6ImFkbWluQGNvbXBhbnkuY29tIiwicm9sZSI6ImFkbWluIiwibmFtZSI6IkFkbWluaXN0cmFkb3IgZGVsIFNpc3RlbWEiLCJ0eXBlIjoiYWNjZXNzIiwidXNlcklkIjoiYWRtaW5AY29tcGFueS5jb20iLCJ3b3Jrc3BhY2VJZCI6ImRlZmF1bHRfd29ya3NwYWNlIiwidGVuYW50SWQiOiJkZWZhdWx0X3RlbmFudCIsImlhdCI6MTc1NTY4ODA5NiwiZXhwIjoxNzU1Njg4OTk2LCJhdWQiOiJ1dGFsay1hcGkiLCJpc3MiOiJ1dGFsay1iYWNrZW5kIn0.x2OdQmXzuaztXMm-GC8le__-_sjXI-DuIWSSfpjBzZ8"
            },
            "baseURL": "https://utalk-backend-production.up.railway.app",
            "method": "post",
            "url": "/api/media/upload",
            "data": {},
            "allowAbsoluteUrls": true
          },
          "code": "ERR_BAD_RESPONSE",
          "status": 500
        }
      ]
    }
  ]
}