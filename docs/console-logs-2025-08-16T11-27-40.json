{
  "exportDate": "2025-08-16T11:27:40.961Z",
  "totalLogs": 113,
  "logs": [
    {
      "timestamp": "2025-08-16T11:26:37.541Z",
      "level": "info",
      "message": "ConsoleExporter: Captura de logs iniciada autom√°ticamente"
    },
    {
      "timestamp": "2025-08-16T11:26:37.541Z",
      "level": "log",
      "message": "üåê ConsoleExporter: Iniciando captura de peticiones de red..."
    },
    {
      "timestamp": "2025-08-16T11:26:37.541Z",
      "level": "info",
      "message": "ConsoleExporter: Captura de peticiones de red iniciada"
    },
    {
      "timestamp": "2025-08-16T11:26:37.541Z",
      "level": "info",
      "message": "[2025-08-16T11:26:37.541Z] [INFO] [SYSTEM] Iniciando aplicaci√≥n UTALK | Data: {\n  \"version\": \"1.0.0\",\n  \"environment\": \"development\",\n  \"debug\": true,\n  \"timestamp\": \"2025-08-16T11:26:37.541Z\"\n}"
    },
    {
      "timestamp": "2025-08-16T11:26:37.559Z",
      "level": "log",
      "message": "üîå WebSocketContext - Estado actualizado en DOM:",
      "data": [
        [
          "disconnected"
        ]
      ]
    },
    {
      "timestamp": "2025-08-16T11:26:37.559Z",
      "level": "log",
      "message": "üîó Room Config - No se puede validar (sin autenticaci√≥n v√°lida)"
    },
    {
      "timestamp": "2025-08-16T11:26:37.559Z",
      "level": "log",
      "message": "üîê AuthProvider - Estado actual:",
      "data": [
        [
          {
            "isAuthenticated": false,
            "loading": true,
            "isAuthenticating": false,
            "hasUser": false,
            "hasBackendUser": false
          }
        ]
      ]
    },
    {
      "timestamp": "2025-08-16T11:26:37.559Z",
      "level": "log",
      "message": "üîê AuthContext - Estado que se pasa al contexto:",
      "data": [
        [
          {
            "isAuthenticated": false,
            "loading": true,
            "isAuthenticating": false,
            "hasUser": false,
            "hasBackendUser": false
          }
        ]
      ]
    },
    {
      "timestamp": "2025-08-16T11:26:37.560Z",
      "level": "log",
      "message": "üîå WebSocketContext - Estado actualizado en DOM:",
      "data": [
        [
          "disconnected"
        ]
      ]
    },
    {
      "timestamp": "2025-08-16T11:26:37.560Z",
      "level": "log",
      "message": "üîó Room Config - No se puede validar (sin autenticaci√≥n v√°lida)"
    },
    {
      "timestamp": "2025-08-16T11:26:37.560Z",
      "level": "log",
      "message": "üîê AuthProvider - Estado actual:",
      "data": [
        [
          {
            "isAuthenticated": false,
            "loading": true,
            "isAuthenticating": false,
            "hasUser": false,
            "hasBackendUser": false
          }
        ]
      ]
    },
    {
      "timestamp": "2025-08-16T11:26:37.560Z",
      "level": "log",
      "message": "üîê AuthContext - Estado que se pasa al contexto:",
      "data": [
        [
          {
            "isAuthenticated": false,
            "loading": true,
            "isAuthenticating": false,
            "hasUser": false,
            "hasBackendUser": false
          }
        ]
      ]
    },
    {
      "timestamp": "2025-08-16T11:26:37.573Z",
      "level": "debug",
      "message": "[vite] connected."
    },
    {
      "timestamp": "2025-08-16T11:26:37.573Z",
      "level": "log",
      "message": "üîê AuthProvider - Estado actual:",
      "data": [
        [
          {
            "isAuthenticated": false,
            "loading": false,
            "isAuthenticating": false,
            "hasUser": false,
            "hasBackendUser": false
          }
        ]
      ]
    },
    {
      "timestamp": "2025-08-16T11:26:37.573Z",
      "level": "log",
      "message": "üîê AuthContext - Estado que se pasa al contexto:",
      "data": [
        [
          {
            "isAuthenticated": false,
            "loading": false,
            "isAuthenticating": false,
            "hasUser": false,
            "hasBackendUser": false
          }
        ]
      ]
    },
    {
      "timestamp": "2025-08-16T11:26:44.878Z",
      "level": "info",
      "message": "[2025-08-16T11:26:44.878Z] [INFO] [AUTH] Iniciando login con backend | Data: {\n  \"email\": \"admin@company.com\"\n}"
    },
    {
      "timestamp": "2025-08-16T11:26:44.891Z",
      "level": "log",
      "message": "üîê AuthProvider - Estado actual:",
      "data": [
        [
          {
            "isAuthenticated": false,
            "loading": true,
            "isAuthenticating": true,
            "hasUser": false,
            "hasBackendUser": false
          }
        ]
      ]
    },
    {
      "timestamp": "2025-08-16T11:26:44.891Z",
      "level": "log",
      "message": "üîê AuthContext - Estado que se pasa al contexto:",
      "data": [
        [
          {
            "isAuthenticated": false,
            "loading": true,
            "isAuthenticating": true,
            "hasUser": false,
            "hasBackendUser": false
          }
        ]
      ]
    },
    {
      "timestamp": "2025-08-16T11:26:44.892Z",
      "level": "info",
      "message": "[2025-08-16T11:26:44.892Z] [INFO] [API] Request sin token | Data: {\n  \"method\": \"POST\",\n  \"url\": \"/api/auth/login\",\n  \"isAuthEndpoint\": true\n}"
    },
    {
      "timestamp": "2025-08-16T11:26:44.892Z",
      "level": "debug",
      "message": "[2025-08-16T11:26:44.892Z] [DEBUG] [API] Request: POST /api/auth/login | Data: {\n  \"email\": \"admin@company.com\",\n  \"password\": \"12345678\"\n}"
    },
    {
      "timestamp": "2025-08-16T11:26:44.893Z",
      "level": "http",
      "message": "üåê XHR REQUEST [xhr_1]",
      "data": [
        {
          "method": "POST",
          "url": "https://utalk-backend-production.up.railway.app/api/auth/login",
          "requestId": "xhr_1",
          "timestamp": "2025-08-16T11:26:44.893Z"
        }
      ],
      "requestId": "xhr_1",
      "url": "https://utalk-backend-production.up.railway.app/api/auth/login",
      "method": "POST"
    },
    {
      "timestamp": "2025-08-16T11:26:45.896Z",
      "level": "http",
      "message": "‚úÖ XHR RESPONSE [xhr_1]",
      "data": [
        {
          "method": "POST",
          "url": "https://utalk-backend-production.up.railway.app/api/auth/login",
          "status": 200,
          "statusText": "",
          "responseTime": 1003,
          "requestId": "xhr_1",
          "timestamp": "2025-08-16T11:26:45.896Z"
        }
      ],
      "requestId": "xhr_1",
      "url": "https://utalk-backend-production.up.railway.app/api/auth/login",
      "method": "POST",
      "status": 200,
      "responseTime": 1003
    },
    {
      "timestamp": "2025-08-16T11:26:45.896Z",
      "level": "debug",
      "message": "[2025-08-16T11:26:45.896Z] [DEBUG] [API] Response: POST /api/auth/login | Data: {\n  \"success\": true,\n  \"message\": \"Login exitoso\",\n  \"accessToken\": \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJlbWFpbCI6ImFkbWluQGNvbXBhbnkuY29tIiwicm9sZSI6ImFkbWluIiwibmFtZSI6IkFkbWluaXN0cmFkb3IgZGVsIFNpc3RlbWEiLCJ0eXBlIjoiYWNjZXNzIiwidXNlcklkIjoiYWRtaW5AY29tcGFueS5jb20iLCJ3b3Jrc3BhY2VJZCI6ImRlZmF1bHRfd29ya3NwYWNlIiwidGVuYW50SWQiOiJkZWZhdWx0X3RlbmFudCIsImlhdCI6MTc1NTM0MzYwNSwiZXhwIjoxNzU1MzQ0NTA1LCJhdWQiOiJ1dGFsay1hcGkiLCJpc3MiOiJ1dGFsay1iYWNrZW5kIn0.7nUq1efw5MQd_8lvM9vK4Au4AjatlsX9VZMQpZ5g7fQ\",\n  \"refreshToken\": \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ0eXBlIjoicmVmcmVzaCIsInVzZXJFbWFpbCI6ImFkbWluQGNvbXBhbnkuY29tIiwidXNlcklkIjoiYWRtaW5AY29tcGFueS5jb20iLCJ3b3Jrc3BhY2VJZCI6ImRlZmF1bHRfd29ya3NwYWNlIiwidGVuYW50SWQiOiJkZWZhdWx0X3RlbmFudCIsImZhbWlseUlkIjoiYmU0MTVkMGUtZmFhMC00NzAzLTgzZjItNTliZTc0YTY0MDI5IiwiZGV2aWNlSWQiOiJkOTg3OTU5MS0zMDM0LTQ3YzgtYmFiYi1jYWQxNGEyZDlmZWMiLCJpYXQiOjE3NTUzNDM2MDUsImV4cCI6MTc1NTk0ODQwNSwiYXVkIjoidXRhbGstYXBpIiwiaXNzIjoidXRhbGstYmFja2VuZCJ9.H8PBD26-X8GJmONKwTkZoC3F2Hy_uoYPTHgQ-gETSXs\",\n  \"expiresIn\": \"15m\",\n  \"refreshExpiresIn\": \"7d\",\n  \"user\": {\n    \"id\": \"admin@company.com\",\n    \"email\": \"admin@company.com\",\n    \"name\": \"Administrador del Sistema\",\n    \"phone\": null,\n    \"role\": \"admin\",\n    \"permissions\": [\n      \"users.read\",\n      \"users.write\",\n      \"users.delete\",\n      \"conversations.read\",\n      \"conversations.write\",\n      \"conversations.delete\",\n      \"messages.read\",\n      \"messages.write\",\n      \"campaigns.read\",\n      \"campaigns.write\",\n      \"campaigns.delete\",\n      \"dashboard.read\",\n      \"settings.read\",\n      \"settings.write\",\n      \"crm.read\",\n      \"crm.write\"\n    ],\n    \"department\": \"admin\",\n    \"isActive\": true,\n    \"settings\": {\n      \"notifications\": true,\n      \"language\": \"es\",\n      \"timezone\": \"America/Mexico_City\"\n    },\n    \"lastLoginAt\": {\n      \"_seconds\": 1752719278,\n      \"_nanoseconds\": 484000000\n    },\n    \"createdAt\": {\n      \"_seconds\": 1755343605,\n      \"_nanoseconds\": 493000000\n    },\n    \"updatedAt\": {\n      \"_seconds\": 1753925658,\n      \"_nanoseconds\": 131000000\n    },\n    \"performance\": null\n  },\n  \"deviceInfo\": {\n    \"deviceId\": \"d9879591-3034-47c8-babb-cad14a2d9fec\",\n    \"deviceType\": \"web\",\n    \"loginAt\": \"2025-08-16T11:26:45.714Z\"\n  }\n}"
    },
    {
      "timestamp": "2025-08-16T11:26:45.896Z",
      "level": "info",
      "message": "[2025-08-16T11:26:45.896Z] [INFO] [API] Response exitosa | Data: {\n  \"method\": \"POST\",\n  \"url\": \"/api/auth/login\",\n  \"status\": 200,\n  \"statusText\": \"\"\n}"
    },
    {
      "timestamp": "2025-08-16T11:26:45.897Z",
      "level": "log",
      "message": "‚úÖ Login exitoso, navegando al chat..."
    },
    {
      "timestamp": "2025-08-16T11:26:45.902Z",
      "level": "log",
      "message": "üîê AuthProvider - Estado actual:",
      "data": [
        [
          {
            "isAuthenticated": true,
            "loading": false,
            "isAuthenticating": false,
            "hasUser": true,
            "hasBackendUser": true
          }
        ]
      ]
    },
    {
      "timestamp": "2025-08-16T11:26:45.902Z",
      "level": "log",
      "message": "üîê AuthContext - Estado que se pasa al contexto:",
      "data": [
        [
          {
            "isAuthenticated": true,
            "loading": false,
            "isAuthenticating": false,
            "hasUser": true,
            "hasBackendUser": true
          }
        ]
      ]
    },
    {
      "timestamp": "2025-08-16T11:26:45.903Z",
      "level": "log",
      "message": "üîê ProtectedRoute - Estado:",
      "data": [
        [
          {
            "isAuthenticated": true,
            "loading": false
          }
        ]
      ]
    },
    {
      "timestamp": "2025-08-16T11:26:45.904Z",
      "level": "log",
      "message": "üîê ProtectedRoute - Estado:",
      "data": [
        [
          {
            "isAuthenticated": true,
            "loading": false
          }
        ]
      ]
    },
    {
      "timestamp": "2025-08-16T11:26:45.913Z",
      "level": "log",
      "message": "üìä useConversations - Usando datos de React Query (carga inicial):",
      "data": [
        [
          0
        ]
      ]
    },
    {
      "timestamp": "2025-08-16T11:26:45.913Z",
      "level": "log",
      "message": "üìä useConversations - Usando datos de React Query (carga inicial):",
      "data": [
        [
          0
        ]
      ]
    },
    {
      "timestamp": "2025-08-16T11:26:45.920Z",
      "level": "log",
      "message": "üìä useConversations - Usando datos de React Query (carga inicial):",
      "data": [
        [
          0
        ]
      ]
    },
    {
      "timestamp": "2025-08-16T11:26:45.920Z",
      "level": "log",
      "message": "üìä useConversations - Usando datos de React Query (carga inicial):",
      "data": [
        [
          0
        ]
      ]
    },
    {
      "timestamp": "2025-08-16T11:26:45.923Z",
      "level": "debug",
      "message": "üîÑ convertMessages - Iniciando conversi√≥n de",
      "data": [
        [
          0,
          "mensajes"
        ]
      ]
    },
    {
      "timestamp": "2025-08-16T11:26:45.924Z",
      "level": "debug",
      "message": "‚úÖ convertMessages - Conversi√≥n completada:",
      "data": [
        [
          {
            "mensajesOriginales": 0,
            "mensajesConvertidos": 0,
            "mensajesFiltrados": 0
          }
        ]
      ]
    },
    {
      "timestamp": "2025-08-16T11:26:45.924Z",
      "level": "debug",
      "message": "üîÑ convertMessages - Iniciando conversi√≥n de",
      "data": [
        [
          0,
          "mensajes"
        ]
      ]
    },
    {
      "timestamp": "2025-08-16T11:26:45.924Z",
      "level": "debug",
      "message": "‚úÖ convertMessages - Conversi√≥n completada:",
      "data": [
        [
          {
            "mensajesOriginales": 0,
            "mensajesConvertidos": 0,
            "mensajesFiltrados": 0
          }
        ]
      ]
    },
    {
      "timestamp": "2025-08-16T11:26:45.927Z",
      "level": "log",
      "message": "üîÑ useChat - Cambio de conversaci√≥n detectado:",
      "data": [
        [
          {
            "anterior": null,
            "nueva": ""
          }
        ]
      ]
    },
    {
      "timestamp": "2025-08-16T11:26:45.927Z",
      "level": "log",
      "message": "üîå WebSocketContext - Ruta /chat: conectando WebSocket..."
    },
    {
      "timestamp": "2025-08-16T11:26:45.928Z",
      "level": "log",
      "message": "üîå Iniciando conexi√≥n de socket..."
    },
    {
      "timestamp": "2025-08-16T11:26:45.928Z",
      "level": "log",
      "message": "üîå Configurando socket con URL:",
      "data": [
        [
          "wss://utalk-backend-production.up.railway.app"
        ]
      ]
    },
    {
      "timestamp": "2025-08-16T11:26:45.928Z",
      "level": "log",
      "message": "üîå Token disponible:",
      "data": [
        [
          "S√≠"
        ]
      ]
    },
    {
      "timestamp": "2025-08-16T11:26:45.928Z",
      "level": "log",
      "message": "üîå Configuraci√≥n de entorno:",
      "data": [
        [
          {
            "WS_URL": "wss://utalk-backend-production.up.railway.app",
            "BACKEND_URL": "https://utalk-backend-production.up.railway.app",
            "DEV_MODE": true
          }
        ]
      ]
    },
    {
      "timestamp": "2025-08-16T11:26:45.928Z",
      "level": "log",
      "message": "üîê JWT - Informaci√≥n extra√≠da del token:",
      "data": [
        [
          {
            "workspaceId": "default_workspace",
            "tenantId": "default_tenant",
            "userId": "admin@company.com",
            "email": "admin@company.com",
            "role": "admin"
          }
        ]
      ]
    },
    {
      "timestamp": "2025-08-16T11:26:45.928Z",
      "level": "log",
      "message": "üîê JWT - Payload completo del token:",
      "data": [
        [
          {
            "email": "admin@company.com",
            "role": "admin",
            "name": "Administrador del Sistema",
            "type": "access",
            "userId": "admin@company.com",
            "workspaceId": "default_workspace",
            "tenantId": "default_tenant",
            "iat": 1755343605,
            "exp": 1755344505,
            "aud": "utalk-api",
            "iss": "utalk-backend"
          }
        ]
      ]
    },
    {
      "timestamp": "2025-08-16T11:26:45.928Z",
      "level": "log",
      "message": "üîê JWT - Informaci√≥n extra√≠da del token:",
      "data": [
        [
          {
            "workspaceId": "default_workspace",
            "tenantId": "default_tenant",
            "userId": "admin@company.com"
          }
        ]
      ]
    },
    {
      "timestamp": "2025-08-16T11:26:45.928Z",
      "level": "log",
      "message": "üîå Informaci√≥n del usuario para socket:",
      "data": [
        [
          {
            "workspaceId": "default_workspace",
            "tenantId": "default_tenant",
            "userId": "admin@company.com",
            "email": "admin@company.com"
          }
        ]
      ]
    },
    {
      "timestamp": "2025-08-16T11:26:45.929Z",
      "level": "log",
      "message": "üîå Conectando socket con timeout de",
      "data": [
        [
          45000,
          "ms..."
        ]
      ]
    },
    {
      "timestamp": "2025-08-16T11:26:45.931Z",
      "level": "info",
      "message": "[2025-08-16T11:26:45.931Z] [INFO] [API] Token agregado a request | Data: {\n  \"method\": \"GET\",\n  \"url\": \"/api/conversations?page=1&limit=20&status=all\",\n  \"hasToken\": true,\n  \"tokenPreview\": \"eyJhbGciOiJIUzI1NiIs...\"\n}"
    },
    {
      "timestamp": "2025-08-16T11:26:45.931Z",
      "level": "debug",
      "message": "[2025-08-16T11:26:45.931Z] [DEBUG] [API] Request: GET /api/conversations?page=1&limit=20&status=all"
    },
    {
      "timestamp": "2025-08-16T11:26:45.931Z",
      "level": "http",
      "message": "üåê XHR REQUEST [xhr_2]",
      "data": [
        {
          "method": "GET",
          "url": "https://utalk-backend-production.up.railway.app/api/conversations?page=1&limit=20&status=all",
          "requestId": "xhr_2",
          "timestamp": "2025-08-16T11:26:45.931Z"
        }
      ],
      "requestId": "xhr_2",
      "url": "https://utalk-backend-production.up.railway.app/api/conversations?page=1&limit=20&status=all",
      "method": "GET"
    },
    {
      "timestamp": "2025-08-16T11:26:45.935Z",
      "level": "debug",
      "message": "üîÑ convertMessages - Iniciando conversi√≥n de",
      "data": [
        [
          0,
          "mensajes"
        ]
      ]
    },
    {
      "timestamp": "2025-08-16T11:26:45.935Z",
      "level": "debug",
      "message": "‚úÖ convertMessages - Conversi√≥n completada:",
      "data": [
        [
          {
            "mensajesOriginales": 0,
            "mensajesConvertidos": 0,
            "mensajesFiltrados": 0
          }
        ]
      ]
    },
    {
      "timestamp": "2025-08-16T11:26:45.935Z",
      "level": "debug",
      "message": "üîÑ convertMessages - Iniciando conversi√≥n de",
      "data": [
        [
          0,
          "mensajes"
        ]
      ]
    },
    {
      "timestamp": "2025-08-16T11:26:45.935Z",
      "level": "debug",
      "message": "‚úÖ convertMessages - Conversi√≥n completada:",
      "data": [
        [
          {
            "mensajesOriginales": 0,
            "mensajesConvertidos": 0,
            "mensajesFiltrados": 0
          }
        ]
      ]
    },
    {
      "timestamp": "2025-08-16T11:26:45.998Z",
      "level": "log",
      "message": "üîå WebSocketContext - Login exitoso, conectando WebSocket inmediatamente..."
    },
    {
      "timestamp": "2025-08-16T11:26:45.998Z",
      "level": "log",
      "message": "üîå Ya hay una conexi√≥n en progreso, saltando..."
    },
    {
      "timestamp": "2025-08-16T11:26:46.205Z",
      "level": "http",
      "message": "‚úÖ XHR RESPONSE [xhr_2]",
      "data": [
        {
          "method": "GET",
          "url": "https://utalk-backend-production.up.railway.app/api/conversations?page=1&limit=20&status=all",
          "status": 200,
          "statusText": "",
          "responseTime": 274,
          "requestId": "xhr_2",
          "timestamp": "2025-08-16T11:26:46.205Z"
        }
      ],
      "requestId": "xhr_2",
      "url": "https://utalk-backend-production.up.railway.app/api/conversations?page=1&limit=20&status=all",
      "method": "GET",
      "status": 200,
      "responseTime": 274
    },
    {
      "timestamp": "2025-08-16T11:26:46.205Z",
      "level": "debug",
      "message": "[2025-08-16T11:26:46.205Z] [DEBUG] [API] Response: GET /api/conversations?page=1&limit=20&status=all | Data: {\n  \"success\": true,\n  \"data\": [\n    {\n      \"id\": \"conv_+5214773790184_+5214793176502\",\n      \"customerPhone\": \"+5214773790184\",\n      \"lastMessage\": {\n        \"id\": \"MM74d827714a54ef58930364cc67427119\",\n        \"content\": \"\",\n        \"timestamp\": \"2025-08-16T11:15:23.859Z\",\n        \"sender\": \"customer\",\n        \"type\": \"media\",\n        \"timestampMs\": 1755342923859,\n        \"timestampISO\": \"2025-08-16T11:15:23.859Z\"\n      },\n      \"unreadCount\": 25,\n      \"status\": \"open\",\n      \"workspaceId\": \"default_workspace\",\n      \"tenantId\": \"default_tenant\",\n      \"participants\": [\n        \"+5214773790184\",\n        \"system@utalk.local\",\n        \"admin@company.com\",\n        \"agent:admin@company.com\",\n        \"whatsapp:+5214773790184\"\n      ],\n      \"lastMessageAt\": {\n        \"_seconds\": 1755342924,\n        \"_nanoseconds\": 147000000\n      },\n      \"contact\": {\n        \"phone\": \"+5214773790184\"\n      },\n      \"createdAt\": {\n        \"_seconds\": 1754699629,\n        \"_nanoseconds\": 900000000\n      },\n      \"updatedAt\": {\n        \"_seconds\": 1755342924,\n        \"_nanoseconds\": 147000000\n      },\n      \"messageCount\": 53,\n      \"lastMessageAtMs\": 1755342924147,\n      \"lastMessageAtISO\": \"2025-08-16T11:15:24.147Z\"\n    },\n    {\n      \"id\": \"conv_+5214775211021_+5214793176502\",\n      \"customerPhone\": \"+5214775211021\",\n      \"lastMessage\": {\n        \"sender\": \"agent:admin@company.com\",\n        \"direction\": \"outbound\",\n        \"content\": \"HOLA\",\n        \"messageId\": \"45a127a9-4a44-4179-a740-3a6adbe1168b\",\n        \"timestamp\": {\n          \"_seconds\": 1755333063,\n          \"_nanoseconds\": 176000000\n        },\n        \"timestampMs\": 1755333063176,\n        \"timestampISO\": \"2025-08-16T08:31:03.176Z\"\n      },\n      \"unreadCount\": 1,\n      \"status\": \"open\",\n      \"workspaceId\": \"default_workspace\",\n      \"tenantId\": \"default_tenant\",\n      \"participants\": [\n        \"+5214775211021\",\n        \"system@utalk.local\",\n        \"admin@company.com\",\n        \"agent:admin@company.com\",\n        \"whatsapp:+5214775211021\"\n      ],\n      \"lastMessageAt\": {\n        \"_seconds\": 1755333063,\n        \"_nanoseconds\": 176000000\n      },\n      \"contact\": {\n        \"phone\": \"+5214775211021\"\n      },\n      \"createdAt\": {\n        \"_seconds\": 1754755652,\n        \"_nanoseconds\": 223000000\n      },\n      \"updatedAt\": {\n        \"_seconds\": 1755333063,\n        \"_nanoseconds\": 316000000\n      },\n      \"messageCount\": 8,\n      \"lastMessageAtMs\": 1755333063176,\n      \"lastMessageAtISO\": \"2025-08-16T08:31:03.176Z\"\n    }\n  ],\n  \"message\": \"2 conversaciones encontradas\",\n  \"timestamp\": \"2025-08-16T11:26:46.250Z\"\n}"
    },
    {
      "timestamp": "2025-08-16T11:26:46.206Z",
      "level": "info",
      "message": "[2025-08-16T11:26:46.206Z] [INFO] [API] Response exitosa | Data: {\n  \"method\": \"GET\",\n  \"url\": \"/api/conversations?page=1&limit=20&status=all\",\n  \"status\": 200,\n  \"statusText\": \"\"\n}"
    },
    {
      "timestamp": "2025-08-16T11:26:46.208Z",
      "level": "log",
      "message": "üìä useConversations - Usando datos de React Query (carga inicial):",
      "data": [
        [
          2
        ]
      ]
    },
    {
      "timestamp": "2025-08-16T11:26:46.208Z",
      "level": "log",
      "message": "üìä useConversations - Usando datos de React Query (carga inicial):",
      "data": [
        [
          2
        ]
      ]
    },
    {
      "timestamp": "2025-08-16T11:26:46.216Z",
      "level": "log",
      "message": "üìä useConversations - Usando datos de React Query (carga inicial):",
      "data": [
        [
          2
        ]
      ]
    },
    {
      "timestamp": "2025-08-16T11:26:46.217Z",
      "level": "log",
      "message": "üìä useConversations - Usando datos de React Query (carga inicial):",
      "data": [
        [
          2
        ]
      ]
    },
    {
      "timestamp": "2025-08-16T11:26:46.224Z",
      "level": "log",
      "message": "üìä useConversations - Sincronizando datos iniciales al store:",
      "data": [
        [
          2
        ]
      ]
    },
    {
      "timestamp": "2025-08-16T11:26:46.225Z",
      "level": "log",
      "message": "üìä useConversations - Sincronizando datos iniciales al store:",
      "data": [
        [
          2
        ]
      ]
    },
    {
      "timestamp": "2025-08-16T11:26:46.229Z",
      "level": "log",
      "message": "üìä useConversations - Usando datos del store (tiempo real):",
      "data": [
        [
          2
        ]
      ]
    },
    {
      "timestamp": "2025-08-16T11:26:46.229Z",
      "level": "log",
      "message": "üìä useConversations - Usando datos del store (tiempo real):",
      "data": [
        [
          2
        ]
      ]
    },
    {
      "timestamp": "2025-08-16T11:26:46.237Z",
      "level": "log",
      "message": "üìä useConversations - Usando datos del store (tiempo real):",
      "data": [
        [
          2
        ]
      ]
    },
    {
      "timestamp": "2025-08-16T11:26:46.237Z",
      "level": "log",
      "message": "üìä useConversations - Usando datos del store (tiempo real):",
      "data": [
        [
          2
        ]
      ]
    },
    {
      "timestamp": "2025-08-16T11:26:46.415Z",
      "level": "log",
      "message": "‚úÖ WebSocket: Conectado exitosamente",
      "data": [
        [
          {
            "socketId": "ytbgA2KXzkSkl0Q7AAAB",
            "url": "wss://utalk-backend-production.up.railway.app",
            "timestamp": "2025-08-16T11:26:46.415Z",
            "workspaceId": "default_workspace",
            "tenantId": "default_tenant",
            "userId": "admin@company.com"
          }
        ]
      ]
    },
    {
      "timestamp": "2025-08-16T11:26:46.415Z",
      "level": "log",
      "message": "‚úÖ Socket conectado:",
      "data": [
        [
          "ytbgA2KXzkSkl0Q7AAAB"
        ]
      ]
    },
    {
      "timestamp": "2025-08-16T11:26:46.422Z",
      "level": "log",
      "message": "üìä ChatComponent - Estado actualizado:",
      "data": [
        [
          {
            "conversationId": "",
            "isConnected": true,
            "isJoined": false,
            "loading": false,
            "error": null,
            "messagesCount": 0
          }
        ]
      ]
    },
    {
      "timestamp": "2025-08-16T11:26:46.422Z",
      "level": "log",
      "message": "üîÑ WebSocketContext - Sincronizaci√≥n inicial (global)..."
    },
    {
      "timestamp": "2025-08-16T11:26:46.423Z",
      "level": "log",
      "message": "üîå WebSocketContext - Estado actualizado en DOM:",
      "data": [
        [
          "connected"
        ]
      ]
    },
    {
      "timestamp": "2025-08-16T11:26:46.423Z",
      "level": "debug",
      "message": "üîå WebSocketContext - Configurando listeners globales"
    },
    {
      "timestamp": "2025-08-16T11:26:46.803Z",
      "level": "log",
      "message": "‚úÖ WebSocketContext - Estado sincronizado:",
      "data": [
        [
          {
            "conversations": [
              {
                "id": "conv_+5214773790184_+5214793176502",
                "status": "open",
                "customerPhone": "+5214773790184",
                "assignedTo": null,
                "lastMessage": {
                  "id": "MM74d827714a54ef58930364cc67427119",
                  "content": "",
                  "timestamp": "2025-08-16T11:15:23.859Z",
                  "sender": "customer",
                  "type": "media"
                },
                "lastMessageAt": {
                  "_seconds": 1755342924,
                  "_nanoseconds": 147000000
                },
                "unreadCount": 25,
                "messageCount": 53,
                "participants": [
                  "+5214773790184",
                  "system@utalk.local",
                  "admin@company.com",
                  "agent:admin@company.com",
                  "whatsapp:+5214773790184"
                ],
                "createdAt": {
                  "_seconds": 1754699629,
                  "_nanoseconds": 900000000
                },
                "updatedAt": {
                  "_seconds": 1755342924,
                  "_nanoseconds": 147000000
                }
              },
              {
                "id": "conv_+5214775211021_+5214793176502",
                "status": "open",
                "customerPhone": "+5214775211021",
                "assignedTo": null,
                "lastMessage": {
                  "sender": "agent:admin@company.com",
                  "direction": "outbound",
                  "content": "HOLA",
                  "messageId": "45a127a9-4a44-4179-a740-3a6adbe1168b",
                  "timestamp": {
                    "_seconds": 1755333063,
                    "_nanoseconds": 176000000
                  }
                },
                "lastMessageAt": {
                  "_seconds": 1755333063,
                  "_nanoseconds": 176000000
                },
                "unreadCount": 1,
                "messageCount": 8,
                "participants": [
                  "+5214775211021",
                  "system@utalk.local",
                  "admin@company.com",
                  "agent:admin@company.com",
                  "whatsapp:+5214775211021"
                ],
                "createdAt": {
                  "_seconds": 1754755652,
                  "_nanoseconds": 223000000
                },
                "updatedAt": {
                  "_seconds": 1755333063,
                  "_nanoseconds": 316000000
                }
              }
            ],
            "unreadCounts": {
              "conv_+5214773790184_+5214793176502": 1
            },
            "onlineUsers": {},
            "serverTime": "2025-08-16T11:26:46.849Z",
            "syncId": "initial_1755343606849"
          }
        ]
      ]
    },
    {
      "timestamp": "2025-08-16T11:26:46.803Z",
      "level": "log",
      "message": "üöÄ WebSocketContext - Emitiendo evento websocket:state-synced..."
    },
    {
      "timestamp": "2025-08-16T11:26:46.804Z",
      "level": "log",
      "message": "‚úÖ useConversations - Estado sincronizado desde WebSocket:",
      "data": [
        [
          {
            "conversations": [
              {
                "id": "conv_+5214773790184_+5214793176502",
                "status": "open",
                "customerPhone": "+5214773790184",
                "assignedTo": null,
                "lastMessage": {
                  "id": "MM74d827714a54ef58930364cc67427119",
                  "content": "",
                  "timestamp": "2025-08-16T11:15:23.859Z",
                  "sender": "customer",
                  "type": "media"
                },
                "lastMessageAt": {
                  "_seconds": 1755342924,
                  "_nanoseconds": 147000000
                },
                "unreadCount": 25,
                "messageCount": 53,
                "participants": [
                  "+5214773790184",
                  "system@utalk.local",
                  "admin@company.com",
                  "agent:admin@company.com",
                  "whatsapp:+5214773790184"
                ],
                "createdAt": {
                  "_seconds": 1754699629,
                  "_nanoseconds": 900000000
                },
                "updatedAt": {
                  "_seconds": 1755342924,
                  "_nanoseconds": 147000000
                }
              },
              {
                "id": "conv_+5214775211021_+5214793176502",
                "status": "open",
                "customerPhone": "+5214775211021",
                "assignedTo": null,
                "lastMessage": {
                  "sender": "agent:admin@company.com",
                  "direction": "outbound",
                  "content": "HOLA",
                  "messageId": "45a127a9-4a44-4179-a740-3a6adbe1168b",
                  "timestamp": {
                    "_seconds": 1755333063,
                    "_nanoseconds": 176000000
                  }
                },
                "lastMessageAt": {
                  "_seconds": 1755333063,
                  "_nanoseconds": 176000000
                },
                "unreadCount": 1,
                "messageCount": 8,
                "participants": [
                  "+5214775211021",
                  "system@utalk.local",
                  "admin@company.com",
                  "agent:admin@company.com",
                  "whatsapp:+5214775211021"
                ],
                "createdAt": {
                  "_seconds": 1754755652,
                  "_nanoseconds": 223000000
                },
                "updatedAt": {
                  "_seconds": 1755333063,
                  "_nanoseconds": 316000000
                }
              }
            ],
            "unreadCounts": {
              "conv_+5214773790184_+5214793176502": 1
            },
            "onlineUsers": {},
            "serverTime": "2025-08-16T11:26:46.849Z",
            "syncId": "initial_1755343606849"
          }
        ]
      ]
    },
    {
      "timestamp": "2025-08-16T11:26:46.804Z",
      "level": "log",
      "message": "üìã useConversations - Actualizando conversaciones sincronizadas:",
      "data": [
        [
          2
        ]
      ]
    },
    {
      "timestamp": "2025-08-16T11:26:46.804Z",
      "level": "log",
      "message": "‚úÖ useConversations - Estado sincronizado desde WebSocket:",
      "data": [
        [
          {
            "conversations": [
              {
                "id": "conv_+5214773790184_+5214793176502",
                "status": "open",
                "customerPhone": "+5214773790184",
                "assignedTo": null,
                "lastMessage": {
                  "id": "MM74d827714a54ef58930364cc67427119",
                  "content": "",
                  "timestamp": "2025-08-16T11:15:23.859Z",
                  "sender": "customer",
                  "type": "media"
                },
                "lastMessageAt": {
                  "_seconds": 1755342924,
                  "_nanoseconds": 147000000
                },
                "unreadCount": 25,
                "messageCount": 53,
                "participants": [
                  "+5214773790184",
                  "system@utalk.local",
                  "admin@company.com",
                  "agent:admin@company.com",
                  "whatsapp:+5214773790184"
                ],
                "createdAt": {
                  "_seconds": 1754699629,
                  "_nanoseconds": 900000000
                },
                "updatedAt": {
                  "_seconds": 1755342924,
                  "_nanoseconds": 147000000
                }
              },
              {
                "id": "conv_+5214775211021_+5214793176502",
                "status": "open",
                "customerPhone": "+5214775211021",
                "assignedTo": null,
                "lastMessage": {
                  "sender": "agent:admin@company.com",
                  "direction": "outbound",
                  "content": "HOLA",
                  "messageId": "45a127a9-4a44-4179-a740-3a6adbe1168b",
                  "timestamp": {
                    "_seconds": 1755333063,
                    "_nanoseconds": 176000000
                  }
                },
                "lastMessageAt": {
                  "_seconds": 1755333063,
                  "_nanoseconds": 176000000
                },
                "unreadCount": 1,
                "messageCount": 8,
                "participants": [
                  "+5214775211021",
                  "system@utalk.local",
                  "admin@company.com",
                  "agent:admin@company.com",
                  "whatsapp:+5214775211021"
                ],
                "createdAt": {
                  "_seconds": 1754755652,
                  "_nanoseconds": 223000000
                },
                "updatedAt": {
                  "_seconds": 1755333063,
                  "_nanoseconds": 316000000
                }
              }
            ],
            "unreadCounts": {
              "conv_+5214773790184_+5214793176502": 1
            },
            "onlineUsers": {},
            "serverTime": "2025-08-16T11:26:46.849Z",
            "syncId": "initial_1755343606849"
          }
        ]
      ]
    },
    {
      "timestamp": "2025-08-16T11:26:46.804Z",
      "level": "log",
      "message": "üìã useConversations - Actualizando conversaciones sincronizadas:",
      "data": [
        [
          2
        ]
      ]
    },
    {
      "timestamp": "2025-08-16T11:26:46.804Z",
      "level": "log",
      "message": "‚úÖ WebSocketContext - Evento websocket:state-synced emitido exitosamente"
    },
    {
      "timestamp": "2025-08-16T11:26:46.809Z",
      "level": "log",
      "message": "üìä useConversations - Usando datos del store (tiempo real):",
      "data": [
        [
          2
        ]
      ]
    },
    {
      "timestamp": "2025-08-16T11:26:46.809Z",
      "level": "log",
      "message": "üìä useConversations - Usando datos del store (tiempo real):",
      "data": [
        [
          2
        ]
      ]
    },
    {
      "timestamp": "2025-08-16T11:26:46.821Z",
      "level": "log",
      "message": "üìä useConversations - Usando datos del store (tiempo real):",
      "data": [
        [
          2
        ]
      ]
    },
    {
      "timestamp": "2025-08-16T11:26:46.821Z",
      "level": "log",
      "message": "üìä useConversations - Usando datos del store (tiempo real):",
      "data": [
        [
          2
        ]
      ]
    },
    {
      "timestamp": "2025-08-16T11:26:47.525Z",
      "level": "log",
      "message": "üîå WebSocket: Desconectado",
      "data": [
        [
          {
            "reason": "transport close",
            "timestamp": "2025-08-16T11:26:47.525Z"
          }
        ]
      ]
    },
    {
      "timestamp": "2025-08-16T11:26:47.526Z",
      "level": "log",
      "message": "‚ùå Socket desconectado:",
      "data": [
        [
          "transport close"
        ]
      ]
    },
    {
      "timestamp": "2025-08-16T11:26:47.526Z",
      "level": "log",
      "message": "üîÑ Intentando reconexi√≥n autom√°tica..."
    },
    {
      "timestamp": "2025-08-16T11:26:47.526Z",
      "level": "log",
      "message": "üîÑ Reconexi√≥n en 1000ms (intento 1)"
    },
    {
      "timestamp": "2025-08-16T11:26:47.537Z",
      "level": "debug",
      "message": "üîå WebSocketContext - Limpiando listeners"
    },
    {
      "timestamp": "2025-08-16T11:26:47.538Z",
      "level": "log",
      "message": "üìä ChatComponent - Estado actualizado:",
      "data": [
        [
          {
            "conversationId": "",
            "isConnected": false,
            "isJoined": false,
            "loading": false,
            "error": null,
            "messagesCount": 0
          }
        ]
      ]
    },
    {
      "timestamp": "2025-08-16T11:26:47.538Z",
      "level": "log",
      "message": "üîå WebSocketContext - Ruta /chat: conectando WebSocket..."
    },
    {
      "timestamp": "2025-08-16T11:26:47.538Z",
      "level": "log",
      "message": "üîå Iniciando conexi√≥n de socket..."
    },
    {
      "timestamp": "2025-08-16T11:26:47.538Z",
      "level": "log",
      "message": "üîå Configurando socket con URL:",
      "data": [
        [
          "wss://utalk-backend-production.up.railway.app"
        ]
      ]
    },
    {
      "timestamp": "2025-08-16T11:26:47.538Z",
      "level": "log",
      "message": "üîå Token disponible:",
      "data": [
        [
          "S√≠"
        ]
      ]
    },
    {
      "timestamp": "2025-08-16T11:26:47.538Z",
      "level": "log",
      "message": "üîå Configuraci√≥n de entorno:",
      "data": [
        [
          {
            "WS_URL": "wss://utalk-backend-production.up.railway.app",
            "BACKEND_URL": "https://utalk-backend-production.up.railway.app",
            "DEV_MODE": true
          }
        ]
      ]
    },
    {
      "timestamp": "2025-08-16T11:26:47.538Z",
      "level": "log",
      "message": "üîê JWT - Informaci√≥n extra√≠da del token:",
      "data": [
        [
          {
            "workspaceId": "default_workspace",
            "tenantId": "default_tenant",
            "userId": "admin@company.com",
            "email": "admin@company.com",
            "role": "admin"
          }
        ]
      ]
    },
    {
      "timestamp": "2025-08-16T11:26:47.539Z",
      "level": "log",
      "message": "üîê JWT - Payload completo del token:",
      "data": [
        [
          {
            "email": "admin@company.com",
            "role": "admin",
            "name": "Administrador del Sistema",
            "type": "access",
            "userId": "admin@company.com",
            "workspaceId": "default_workspace",
            "tenantId": "default_tenant",
            "iat": 1755343605,
            "exp": 1755344505,
            "aud": "utalk-api",
            "iss": "utalk-backend"
          }
        ]
      ]
    },
    {
      "timestamp": "2025-08-16T11:26:47.539Z",
      "level": "log",
      "message": "üîê JWT - Informaci√≥n extra√≠da del token:",
      "data": [
        [
          {
            "workspaceId": "default_workspace",
            "tenantId": "default_tenant",
            "userId": "admin@company.com"
          }
        ]
      ]
    },
    {
      "timestamp": "2025-08-16T11:26:47.539Z",
      "level": "log",
      "message": "üîå Informaci√≥n del usuario para socket:",
      "data": [
        [
          {
            "workspaceId": "default_workspace",
            "tenantId": "default_tenant",
            "userId": "admin@company.com",
            "email": "admin@company.com"
          }
        ]
      ]
    },
    {
      "timestamp": "2025-08-16T11:26:47.539Z",
      "level": "log",
      "message": "üîå Conectando socket con timeout de",
      "data": [
        [
          45000,
          "ms..."
        ]
      ]
    },
    {
      "timestamp": "2025-08-16T11:26:47.539Z",
      "level": "log",
      "message": "üîå WebSocketContext - Estado actualizado en DOM:",
      "data": [
        [
          "disconnected"
        ]
      ]
    },
    {
      "timestamp": "2025-08-16T11:27:02.845Z",
      "level": "error",
      "message": "‚ùå WebSocket: Error de conexi√≥n",
      "data": [
        [
          {
            "message": "websocket error",
            "name": "Error",
            "url": "wss://utalk-backend-production.up.railway.app",
            "timestamp": "2025-08-16T11:27:02.845Z",
            "workspaceId": "default_workspace",
            "tenantId": "default_tenant",
            "userId": "admin@company.com"
          }
        ]
      ]
    },
    {
      "timestamp": "2025-08-16T11:27:02.846Z",
      "level": "error",
      "message": "üîå Error de conexi√≥n:",
      "data": [
        [
          {
            "description": {
              "isTrusted": true
            },
            "type": "TransportError"
          }
        ]
      ]
    },
    {
      "timestamp": "2025-08-16T11:27:02.846Z",
      "level": "error",
      "message": "üîå Detalles del error:",
      "data": [
        [
          {
            "message": "websocket error",
            "name": "Error",
            "type": "TransportError",
            "stack": "Error: websocket error\n    at WS.onError (http://localhost:5173/node_modules/.vite/deps/socket__io-client.js?v=de5ee7e0:495:33)\n    at ws.onerror (http://localhost:5173/node_modules/.vite/deps/socket__io-client.js?v=de5ee7e0:1010:35)"
          }
        ]
      ]
    },
    {
      "timestamp": "2025-08-16T11:27:18.101Z",
      "level": "error",
      "message": "‚ùå WebSocket: Error de conexi√≥n",
      "data": [
        [
          {
            "message": "websocket error",
            "name": "Error",
            "url": "wss://utalk-backend-production.up.railway.app",
            "timestamp": "2025-08-16T11:27:18.101Z",
            "workspaceId": "default_workspace",
            "tenantId": "default_tenant",
            "userId": "admin@company.com"
          }
        ]
      ]
    },
    {
      "timestamp": "2025-08-16T11:27:18.102Z",
      "level": "error",
      "message": "üîå Error de conexi√≥n:",
      "data": [
        [
          {
            "description": {
              "isTrusted": true
            },
            "type": "TransportError"
          }
        ]
      ]
    },
    {
      "timestamp": "2025-08-16T11:27:18.102Z",
      "level": "error",
      "message": "üîå Detalles del error:",
      "data": [
        [
          {
            "message": "websocket error",
            "name": "Error",
            "type": "TransportError",
            "stack": "Error: websocket error\n    at WS.onError (http://localhost:5173/node_modules/.vite/deps/socket__io-client.js?v=de5ee7e0:495:33)\n    at ws.onerror (http://localhost:5173/node_modules/.vite/deps/socket__io-client.js?v=de5ee7e0:1010:35)"
          }
        ]
      ]
    },
    {
      "timestamp": "2025-08-16T11:27:33.423Z",
      "level": "error",
      "message": "‚ùå WebSocket: Error de conexi√≥n",
      "data": [
        [
          {
            "message": "websocket error",
            "name": "Error",
            "url": "wss://utalk-backend-production.up.railway.app",
            "timestamp": "2025-08-16T11:27:33.423Z",
            "workspaceId": "default_workspace",
            "tenantId": "default_tenant",
            "userId": "admin@company.com"
          }
        ]
      ]
    },
    {
      "timestamp": "2025-08-16T11:27:33.424Z",
      "level": "error",
      "message": "üîå Error de conexi√≥n:",
      "data": [
        [
          {
            "description": {
              "isTrusted": true
            },
            "type": "TransportError"
          }
        ]
      ]
    },
    {
      "timestamp": "2025-08-16T11:27:33.424Z",
      "level": "error",
      "message": "üîå Detalles del error:",
      "data": [
        [
          {
            "message": "websocket error",
            "name": "Error",
            "type": "TransportError",
            "stack": "Error: websocket error\n    at WS.onError (http://localhost:5173/node_modules/.vite/deps/socket__io-client.js?v=de5ee7e0:495:33)\n    at ws.onerror (http://localhost:5173/node_modules/.vite/deps/socket__io-client.js?v=de5ee7e0:1010:35)"
          }
        ]
      ]
    }
  ]
}